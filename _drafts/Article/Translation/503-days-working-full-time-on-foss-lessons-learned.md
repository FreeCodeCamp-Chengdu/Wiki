---
title: "全职参与开源项目 503 天：学到的经验"
authorURL: ""
originalURL: https://mathspp.com/blog/503-days-working-full-time-on-foss-lessons-learned
translator: ""
reviewer: ""
---

这篇文章分享了我全职参与一个开源项目 503 天以来所学到的一些经验。

从 2022 年 11 月 14 日到 2024 年 3 月 31 日，我全职参与了一个开源项目。这篇文章记录了我在那 503 天里学到的一些东西。

现在我不再担任全职职位，我有更多的时间可以投入到**你**身上。如果你正在寻找 Python 培训，请[联系我][6]。我也将投入时间在这个博客和[我的书籍][7]上。

2022 年 11 月 14 日，我加入了 Textualize，这家公司是热门开源 Python 包 [Rich][8] 和 [Textual][9] 的幕后推手。当我加入这家公司并开始在阳光明媚的葡萄牙远程工作时，我的同事有 [Will][10]（Rich 和 Textual 的创建者，也是我的老板）、[Darren][11] 和 [Dave][12]，他们都在苏格兰一起工作。在我的职业生涯中，我第一次成为了“房间里 Python 技术最差”[1][13] 的开发者。这意味着在这 503 天里，我的技术知识有了长足的进步，尤其是在以下方面：

-   异步代码执行和 Python 的 `asyncio` 库；
-   Python 类型提示；
-   测试 / `pytest`；以及
-   软件工程最佳实践。

然而，这篇文章将聚焦于我在这 503 天经历中学到的非技术性教训，这些教训大致分为以下四个类别：

1. 网络存在如何能够带来工作机会；
2. 你的自我不应该妨碍你的工作；
3. 如何与用户和贡献者互动；
4. 如何在你不完全了解的庞大代码库上工作。

让我们直接深入讨论吧。

## 你在网上所做的一切都像是一面旗帜

我学到的一件有趣的事情是，甚至在我开始全职工作之前，你就绝对可以通过非传统的方式找到（工作）机会。这种情况一直存在，但互联网让这一切变得更容易。

如果你正在找工作，你可以将你的简历提交到平台或填写表格。我通过这个过程得到过工作机会。但这并不是我得到这份工作的方式，也不是我得到以前任何一份工作的方式。我会或多或少地告诉你我是如何“骗”Will 雇用我的，希望你能理解网络形象的力量有多大。

我在 X/Twitter 上认识了 Will，[我在那里积极发布关于 Python 的内容][15]。在几个月的时间里，我们偶尔会有互动。有时我会评论他的帖子，有时他会评论我的帖子。我认为 Will 喜欢我发布的 Python 技巧，以及偶尔链接到我的文章。

经过数月的偶尔 Twitter 互动和几次非正式的视频通话后，Will 给我发消息，问我是否有兴趣为 Textualize 工作。几个月前，我曾提到过，我认为自己会在未来与他共事。但我当时说那句话的时候并没有想找工作。事实上，我记得我当时说的是“我认为自己会在 **5 年后** 与你共事”。尽管如此，几个月后，我的收件箱里收到了 Will 的消息！我同意参加招聘流程，最终 Will 向我发出了录用通知。

我很遗憾要离开之前的工作，在那里我享受着使用/教授 APL 的乐趣，但我也很高兴能全职参与一个 Python FOSS 项目。

得到这份工作邀请证实了你在网上所做的一切都可以成为你和你的工作的旗帜。就我而言，那就是我在社交媒体上发布的 Python 内容、我的博客文章、我的书籍等等。对你来说，它可能是不同的东西。但不要忘记这种**可能性**！

## 放下身段

在加入 Textualize 之前，我一直都是团队里最棒的 Python 开发者……因为我是团队里 _唯一_ 的 Python 开发者！

成为某个领域的佼佼者对你的自尊心很有好处，但这也意味着没有人能够拉你一把，教你新东西……而我想要的是这个！我想和那些我在技术技能上敬佩的人一起工作，我意识到 Textualize 可以给我提供这个机会。

我加入了 Textualize，并且立刻就明白代码审查将是我学习的绝佳时机。想想看，当你写代码的时候，重要的不仅仅是代码是否实现了预期功能（修复 bug、实现功能等等）。你写的代码本身也很重要，而代码审查正是你的同事们对你写的代码进行评价的机会。

### 不要放过任何疑问！

我做过并且可以推荐的一件事是，在代码审查中提出问题。我经常会阅读别人的代码，然后想：“有意思，为什么他们不用 X、Y 和 Z 来实现呢？”。每当遇到这种情况，我都会留言*询问*同样的问题，即使这个问题听起来有点基础。通常情况下，他们会回复并解释他们的理由，而我也会学到一些新东西。还有一些时候，他们会发现自己没有考虑到我提出的替代方案，然后采纳了我的建议。

我认为这里的关键点是

1.  你在提出问题时，应该假设你正在审查其代码的人有充分的理由以不同于你预期的方式做事；以及
2.  你不应该克制自己不问问题，无论这些问题听起来多么愚蠢或基础。

第一点很重要，因为你不想让对方觉得他们受到了攻击，而且你应该理解作者决策背后的理由。第二点很重要，因为你想尽可能多地学习,而且因为有时人们只是忘记了更简单的替代方案（即使是高级开发人员）。

我很高兴地告诉大家，我已经完全接受了问问题的思维模式，即使这些问题听起来很愚蠢，所以暴露我在某些领域的知识缺陷并没有对我的自尊心造成太大伤害,但是让别人审查我的代码就完全是另一回事了。

### 积极面对（代码审查）反馈

我的拉取请求总是会被标记上红色的 X，要求修改我的代码。

![A screenshot of Will requesting changes on my PR on GitHub](https://mathspp.com/user/pages/02.blog/503-days-working-full-time-on-foss-lessons-learned/_one_request.webp "Will requesting changes on one of my first PRs.")

will 在我的一个早期 PR 中代码修改请求。

回到为什么代码审查如此有趣的原因，它不仅仅是关于我是否修复了错误或实现了功能。它还与我编写的实际代码有关。一开始，我所有的工作都要接受审查，这让我很难受。但如果我想提高我的 Python 和软件工程技能，我就必须接受这种审查，以及每当有人要求修改我的代码时我收到的反馈。

我得到了很多练习，因为我收到了很多修改请求：

![A montage with multiple instances of pull requests where someone requested I make changes to my code.](https://mathspp.com/user/pages/02.blog/503-days-working-full-time-on-foss-lessons-learned/_request_montage.webp "Montage of “changes requested” on my work.")

"修改请求" 充斥着我的屏幕。

我学会了欣然接受反馈，我也建议你这样做！假设每个人都是善意的，这是你能做的最好的事情之一。如果你能让别人解释为什么他们推荐不同的方法，那就更好了。

### 每个人都会犯错

每个人都会有状态不好的时候，糟糕的一天，糟糕的一周，有些星期我会觉得效率低下，或者犯更多的错误。但其他人也是如此！如果你觉得自己不在最佳状态，那就处理一些更简单的任务。这样做是合理的。

处于低效时期是很糟糕的，但这也是一个很好的时机，可以让你弄清楚你是在和通情达理的人一起工作，还是和混蛋一起工作。想象一下：

-   你发起了一个拉取请求；
-   它经过了通常的审查流程并被合并；
-   你实现的功能发布给了公众；以及
-   几天后，用户报告了你实现的功能中存在`明显的`错误。

你会有什么感觉？对我来说，这让我觉得有点傻。我对被报告的错误感到完全负责！毕竟，是我实现了这个功能，而且这个错误并不是一个模糊的交互，这只是我的一个失误。

值得庆幸的是，我的团队做出了不同的反应，他们在回应我的责任感时说 `我们不玩责备游戏`。我想这一切都可以归结为我上面已经写过的古老格言：

> 每个人都会犯错

当别人犯错时，要优雅地提供帮助，而不是评判和批评。如果你这样做，当你自己犯错时，别人就更有可能对你优雅地提供帮助。

为了缓解尴尬，这里有一张截图，是我在打开一个“错误报告”后感到羞愧的样子，这个错误报告的起因是我对 Python 工作方式的重大判断失误：

![Screenshot of a GitHub comment after opening a “bug report” that was fueled by a major lapse of judgement regarding the way Python works. The comment reads “can we create a 'shameful' label and add it to this issue, please?”](https://mathspp.com/user/pages/02.blog/503-days-working-full-time-on-foss-lessons-learned/_shameful.webp "Closing the most ridiculous issue I ever opened in my life.")

关闭我这辈子提交过的最荒谬的问题。

## 与用户和贡献者互动

为一个受欢迎的自由开源软件项目工作，带来了一种意想不到的祝福和诅咒：用户。用户显然是一种祝福。将你的全部心血投入到一个无人使用的项目中听起来并不好玩。但处理用户互动出人意料地耗时且困难！让我与你分享我在做这件事时学到的一些东西。

### 创建贡献指南

没有人会读它。或者更确切地说，没有人会在浪费你一点时间之前读它。但是，拥有这份文件，并附上清晰的指导方针和有用的建议，将为你节省大量时间。

贡献指南还将在某些情况下支持你。稍后会详细介绍！

### 向错误报告者提供清晰的提示

我学到的一件事是，如果你想要一份像样的错误报告，你必须手把手地指导你的用户。真正有帮助的一件事是为错误报告设置一个问题模板，这是 GitHub 的一个优秀功能。

在撰写本文时，我们的错误报告模板问题如下所示：

```text
Have you checked closed issues?
https://github.com/Textualize/textual/issues?q=is%3Aissue+is%3Aclosed

Please give a brief but clear explanation of the issue.
If you can, include a complete working example that demonstrates the bug.
**Check it can run without modifications.**

It will be helpful if you run the following command and paste the results:

    textual diagnose

Feel free to add screenshots and / or videos.
These can be very helpful!
```

我们可能应该改变的一件事是要求提供 _**最小可复现示例**_，而不是要求提供“完整的可运行示例”。 有时，人们报告错误时不提供任何代码作为佐证，这令人沮丧。 但更令人沮丧的是，当用户发布数百行代码时！ 我觉得要求用户尽可能简化产生错误的代码是合理的，因此将其添加到问题模板中可以节省大量时间。

根据项目的性质，您可能需要用户提供更具体的信息。 在我们的项目中，一项非常宝贵的功能是 `textual diagnose` 命令。 它会向终端打印许多有用信息，例如操作系统名称和版本、Python 版本和安装位置，以及正在使用的终端设置的信息，这些信息会严重影响 Textual 的行为方式。 您可能希望在问题模板和/或贡献指南中添加特定于项目的说明。

### 要友善到令人感到烦恼

总的来说，无论何时与他人互动，你都应该尽可能友善。每个人都是不同的，每种情况都是独特的。通常，我们会忽略一些细微差别，而这些细微差别可以解释某种我们可能认为不合理的行为。

-   用户听起来粗鲁或刻薄吗？

也许英语不是他们的第一语言，他们无法很好地表达自己。例如，在某个 PR 审查中，我最终说用户应该为他们所做的事情感到羞耻，因为我把一个英语单词和一个葡萄牙语单词混淆了。

-   用户是否询问了文档中已经解释过的内容？

假设他们实际上已经查阅了文档但找不到信息，或者他们找到了但无法理解。将他们指向适当的链接，并询问是否有不清楚或缺乏细节的地方。

这可能非常累，但我发现这绝对值得付出努力。如果你不把情况升级，那些一开始看起来不愉快的互动最终可能会变得很好。这种情况在我身上发生过不止一次！

### 快速给出第一次回复

我认为非常重要的一点是尽快回复外部用户的第一次留言。

如果用户提交了一个问题，感谢他们的报告，并让他们知道你将在有时间的时候查看。如果这是一个错误报告，请查看它是否缺少可重现的示例或更多信息，并立即要求提供。如果用户提交了一个拉取请求，感谢他们花费的时间，并说你将在有机会的时候进行审查。

当用户与你的项目互动时，很可能 _你_ 会从这种互动中有所收获。对于错误报告和拉取请求来说，这显然是正确的。所以，我认为我们不应该让用户在几天或几周内都没有得到简单的回复。

我并不是说错误报告必须立即修复，或者拉取请求需要立即审查。我的意思是，我们应该努力尽快 _向用户说些什么_。我在思考当我向另一个项目提交问题并且几个月都没有得到回复时的感受后，才意识到这一点！

如果你真的很忙（这很正常，而且绝对有可能发生），那就设置一个自动回复友善内容的操作。“感谢您的拉取请求/错误报告。我现在非常忙，我会尽快回复您。”

## 参与一个大型项目

Textual 是我长期参与过的最大的代码库。我曾为 _更大的_ 项目做过一些零星贡献，但对大型项目的一次性贡献比持续工作要简单得多。

当代码库达到一定规模时，你几乎不可能一下子记住所有内容。对我来说，Textual 就处于这个阶段。随着时间的推移，我越来越熟悉代码库，但仍然有一些东西我不知道它们是如何工作的，还有一些代码我从未接触过。

为了更容易地处理如此庞大的项目，我开发了三个系统：

1.  一套我在开发大型功能或修复错误时牢记的戒律；
2.  一个用于记录大型任务、难题和重要事件的笔记系统；以及
3.  一个我在提交拉取请求之前会查看的个人拉取请求清单。

让我带你逐一了解这三个系统。

### 我工作的 4 条戒律

我记得我做过几次比较大的拉取请求，但第一次尝试都不太顺利。我四处征求关于如何处理这种情况的建议（当你正在实现一个更大的功能或修复一个非常困难的错误时），最后我总结出了四条戒律，我在编写代码时应该始终牢记。

1.  **什么对开发者最有利？** – 在做设计决策时，我应该始终考虑使用我代码的人想要什么，而这应该成为我决策的驱动力。
2.  **问题的本质是什么？** – 代码是否做了它 _应该_ 做的所有事情，还是我只解决了正在解决的问题中明确提到的那些事情？遵循问题的 _本质_，我还应该做些什么吗？
3.  **我承担责任，这样别的开发者就不必承担。** 我是那个需要处理所有烦人或困难的边缘情况并编写无聊代码的人，这样用户就不必这样做了。
4.  **我是否在阻止用户做他们可能想做的事情？** 我的设计决策是否阻止了用户做合理的事情，以及他们 _可能_ 想做的事情，即使我不清楚他们 _为什么_ 想做？

这四个想法是相关的，而且可能是不言而喻的。事后看来，它们对我来说也是显而易见的。但把它们写下来对我 definitely 有帮助。

### 做笔记

另一件对我有帮助的事情是，记下我正在处理的更大问题的笔记。每当我想修复一个棘手的错误时，我都会记下一些关于我尝试过的事情的笔记。我对错误来源的猜想。尝试修复上述错误。

就我个人而言，记笔记的行为有助于将我一路学到的一些东西记在脑子里。在试图解决某些问题时，哪些策略有效，哪些策略无效。

记笔记不太可能以同样的方式让每个人都受益，但我相信，记笔记的一些变体可能会让你受益。

### 个人拉取请求清单

记笔记对我个人很有帮助，但我认为我的个人拉取请求清单可能对其他人更有帮助。每当我在处理一个问题时，我都会或多或少地遵循以下流程图：

![A flowchart that I used to decide whether I could make a pull request or not. The flowchart emphasises how often I ran the tests.](https://mathspp.com/user/pages/02.blog/503-days-working-full-time-on-foss-lessons-learned/_PR_flowchart.webp "Flowchart for making pull requests.")

拉取请求流程图。

如果上面的流程图给人的印象是我痴迷于运行测试，那么这还不足以说明我运行测试的 _频率_ 之高。

在经历了几次事故和有趣的冒险之后，我意识到没有 `运行测试过于频繁` 这回事。在这 503 天里，我设法以最意想不到的方式破坏了测试，或者看到其他人破坏了测试。比如修复代码中的拼写错误、删除未使用的导入、重新格式化代码，等等。每当我认为 `这个改动太微不足道了，我不需要运行测试` 时，我就会破坏 CI。

每当我创建一个 PR 时，我总是先把它做成一个草稿 PR，然后我会审查我自己的代码。出于某种原因，在 GitHub 上审查我自己的代码帮助我发现了一些问题，而这些问题有时我在本地工作时会错过。只有在我审查了自己的代码并确保测试在 CI 上通过后，我才会请求其他人进行审查。

有一件事可能很明显，也可能不明显，这是一个有点技术性的评论，那就是测试对我的帮助 _很大_，给了我处理 Textual 代码库所需的信心。代码太多了，我很容易在某个地方做出修改，以为自己做的一切都是对的，然后在代码的其他一些（看似）不相关的部分破坏了测试。如果没有测试，我的工作将会困难得多……

## 结论

在 Textual 工作的这 503 天里，我学到了很多东西。我很伤心自己被解雇了，尤其是考虑到这对 Textual 可能意味着什么，但我并不后悔离开之前的工作加入这个项目。我学到了很多关于 Python、软件工程的知识，以及很多关于开源项目的工作方式。以下是我从这 503 天的经历中学到的：

-   **你在网上所做的一切都是你的招牌。**
-   **提出所有问题。**
-   **拥抱（代码审查）反馈。**
-   **每个人都会犯错。**
-   **创建贡献指南。**
-   **向错误报告者提供清晰的说明。**
-   **友好待人，即使到了烦人的程度。**
-   **快速做出第一次回复。**
-   **如何处理外部拉取请求。**
-   **我的工作四诫。**
-   **做笔记。**
-   **个人拉取请求清单。**

现在，我会利用我的时间来帮助***你***、你的同事以及你的团队。如果你正在寻找 Python 培训，[请联系我][49]。我还将投入更多时间撰写书籍和在线教授 Python，敬请期待！

---

1.  在我之前工作过的地方，我一直是唯一的 Python 开发人员，所以从技术上来说，我也是那里最差的 Python 开发人员……但你明白我的意思。

## 成为更优秀的 Python 🐍 开发者 🚀

35+ 章。400+ 页。数百个示例。超过 30,000 名读者！

我的书 `Pydon'ts` 教你如何编写优雅、富有表现力且地道的 Python 代码，帮助你成为更优秀的开发者。[\>>> 点击此处下载 🐍🚀][53]。

[6]: mailto:rodrigo@mathspp.com
[7]: https://mathspp.com/books
[8]: https://github.com/textualize/rich
[9]: https://github.com/textualize/textual
[10]: https://github.com/willmcgugan
[11]: https://github.com/darrenburns
[12]: https://github.com/davep
[15]: https://x.com/mathsppblog
[49]: mailto:rodrigo@mathspp.com
[53]: https://gumroad.com/l/pydonts?variant=Free%20for%20ever%20%F0%9F%92%B8&wanted=true

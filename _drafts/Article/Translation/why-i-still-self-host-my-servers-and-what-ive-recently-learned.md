---
title: Christian Hollinger
date: 2024-08-25T00:00:00.000Z
authorURL: ""
originalURL: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/
translator: ""
reviewer: ""
---

# ä¸ºä»€ä¹ˆæˆ‘ä»ç„¶è‡ªæ‰˜ç®¡æœåŠ¡å™¨(ä»¥åŠæœ€è¿‘å­¦åˆ°çš„ç»éªŒ)
å¼•è¨€
é™¤äº†ç”µå­é‚®ä»¶ä¹‹å¤–ï¼Œæˆ‘è‡ªå·±æ‰˜ç®¡æ‰€æœ‰æœåŠ¡ã€‚æˆ‘ä¹‹å‰åœ¨[è¿™é‡Œ][20]ã€[è¿™é‡Œ][21]å’Œ[è¿™é‡Œ][22]å†™è¿‡ç›¸å…³å†…å®¹ã€‚
æ€»çš„æ¥è¯´ï¼Œåœ¨å®¶é‡Œï¼Œæˆ‘è¿è¡Œç€ä¸€ä¸ªç”± 3 ä¸ªèŠ‚ç‚¹ç»„æˆçš„ Proxmox é›†ç¾¤ï¼Œæä¾›å¤šé¡¹æœåŠ¡ï¼Œä¸ºå®¶åº­ç½‘ç»œæä¾›æ”¯æŒã€‚ç½‘ç»œè®¾å¤‡åŒ…æ‹¬ Mikrotik è·¯ç”±å™¨ã€Mikrotik äº¤æ¢æœºå’Œ UniFi WiFiï¼Œæ­¤å¤–è¿˜æœ‰ä¸€å°å¤–éƒ¨ VPSã€‚
æœ¬æ–‡ä¸»è¦è®¨è®ºä¸¤ä¸ªæ–¹é¢ï¼šä¸ºä»€ä¹ˆæˆ‘ä»ç„¶åšæŒè¿™æ ·åšï¼Œä»¥åŠæœ€è¿‘ä»ä¸­å­¦åˆ°äº†ä»€ä¹ˆã€‚å¯ä»¥å°†å…¶è§†ä¸ºä¸€ä¸ªç®€çŸ­çš„å›é¡¾ï¼Œä¹Ÿæ˜¯å¯¹è¯»è€…æ¢ç´¢ç›¸åŒé¢†åŸŸçš„ä¸€ç§é¼“åŠ±ã€‚
![heimdall.lan][88]
heimdall.lan [èƒŒæ™¯æ¥è‡ª HBO å®£ä¼ ææ–™][23]

## æˆ‘çš„æœåŠ¡

æˆ‘è‡ªæ‰˜ç®¡ï¼š

-   `PiHole` ä½œä¸º DNSï¼ˆå†—ä½™ï¼‰
-   RouterOSï¼ˆå¯èƒ½æœ‰ç‚¹â€œè‡ªæ‰˜ç®¡â€ï¼Œä½†å®ƒç¡®å®æä¾›äº† DHCPã€VLANã€é˜²ç«å¢™ã€DNS è·¯ç”±ç­‰åŠŸèƒ½ï¼‰
-   `UniFi controller` ä½œä¸º WiFi æ§åˆ¶å™¨
-   `heimdall` ä½œä¸ºä¸»é¡µ
-   `TrueNAS` ä½œä¸ºæ–‡ä»¶æœåŠ¡å™¨ï¼ˆå†—ä½™ï¼‰
-   `gitea` ä½œä¸ºæœ¬åœ° git æœåŠ¡å™¨
-   `wiki.js` ç”¨äºä¸€èˆ¬çŸ¥è¯†å­˜å‚¨
-   `VS Code` ä½œä¸ºåŸºäºæµè§ˆå™¨çš„ç¼–è¾‘å™¨
-   A `Ubuntu` å¼€å‘è™šæ‹Ÿæœºç”¨äºä¸€èˆ¬ä»£ç æ‚è€ï¼ˆDebian å¦åˆ™ï¼‰
-   `mariadb` ç”¨äºæ•°æ®åº“éœ€æ±‚
-   `redis` ç”¨äºå¥å¿˜æ•°æ®åº“éœ€æ±‚
-   `InfluxDB` ç”¨äºç‰¹å®šæ•°æ®åº“éœ€æ±‚ï¼ˆå³â€œæˆ‘æ‰“ç®—é‡æ–°å›åˆ°çš„é¡¹ç›®â€ï¼‰
-   `LibreNMS` ä½œä¸ºç½‘ç»œç®¡ç†å™¨å’Œç›‘æ§å¥—ä»¶
-   `Calibre Web` ç”¨äºç”µå­ä¹¦å’Œè®ºæ–‡
-   `Komga` ç”¨äºæ¼«ç”»
-   `Jellyfin` ç”¨äºä¸€èˆ¬åª’ä½“
-   `Homebridge` ç”¨äºäº’è”ç½‘çš„åƒåœ¾ï¼ˆtmï¼‰è®¾å¤‡æˆ‘ä¸éœ€è¦

æ­¤å¤–ï¼Œæˆ‘è¿˜æœ‰ä¸€å°å¤–éƒ¨ VPSï¼Œå·²ç»è¿è¡Œäº† 10 å¤šå¹´ï¼Œæ‰˜ç®¡äº†ï¼š

-   `nginx` ç”¨äºæˆ‘çš„ç½‘ç«™å’Œè¿™ä¸ªåšå®¢
-   `firefoxsync-rs`ï¼Œç”¨äºåŒæ­¥ Firefoxï¼ˆä½¿ç”¨æ–°çš„ `rust` ç‰ˆæœ¬ï¼ï¼‰
-   `Nextcloud` ç”¨äºæ‰˜ç®¡æ–‡ä»¶ã€æ—¥å†å’Œè”ç³»äºº

ä½ å¯ä»¥æƒ³è±¡ï¼Œè¿™ç¡®å®æ˜¯ä¸€é¡¹ç›¸å½“å¤šçš„å·¥ä½œã€‚æˆ‘ï¼Œå°½ç®¡æœ‰æ™®éçš„çœ‹æ³•ï¼Œä¹Ÿæœ‰ä¸€ä¸ªç”Ÿæ´»åœ¨å¤–é¢çš„ç”Ÿæ´»ã€‚äº‹å®ä¸Šï¼Œæˆ‘å®æ„¿åœ¨å‘¨æœ«å‡ºå»ï¼ˆå‰ææ˜¯å¤©æ°”ä¸æ˜¯ 90 åº¦ï¼‰ã€‚è¿™æœ‰æ—¶ä¼šä¸æ‰˜ç®¡æ‰€æœ‰è¿™äº›äº‹æƒ…å‘ç”Ÿå†²çªã€‚

å¯¹ä¸ç†Ÿæ‚‰çš„äººæ¥è¯´:æˆ·å¤–ç”Ÿæ´»!(æ¥è‡ªæˆ‘ä»¬èŠ±å›­çš„ç¤ºä¾‹å›¾ç‰‡) [æ‹æ‘„:æˆ‘][24]

é‚£ä¹ˆ...ä¸ºä»€ä¹ˆè¦è¿™æ ·åšå‘¢?

## ä¸ºä»€ä¹ˆæˆ‘è¦è‡ªæ‰˜ç®¡

è¿™ç¯‡æ–‡ç« å¹¶ä¸å®Œå…¨æ˜¯å…³äºè¿™ä¸ªé—®é¢˜çš„,ä½†æˆ‘ä¸å–œæ¬¢æ ‡é¢˜å…š,æ‰€ä»¥æˆ‘ä¼šåˆ‡å®å›ç­”æ ‡é¢˜ä¸­çš„é—®é¢˜:æœ‰ä¸¤ä¸ªåŸå› ã€‚

é¦–å…ˆ,æˆ‘å–œæ¬¢ç‹¬ç«‹ - æˆ–è€…è‡³å°‘,å°½å¯èƒ½ç‹¬ç«‹ã€‚è¿™å’Œæˆ‘ä»¬æœ‰å¤‡ç”¨ç”µæºçš„åŸå› ä¸€æ ·,ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆæˆ‘ä¼šçƒ¤é¢åŒ…ã€ä¿å­˜é£Ÿç‰©,ä»¥åŠæ€»ä½“ä¸Šåƒä¸€ä¸ªè¿«åˆ‡æƒ³è¦å–‚é¥± 12 ä¸ªå­™å­ç›´åˆ°ä»–ä»¬æ— æ³•è‡ªè¡Œç§»åŠ¨çš„ç¥–æ¯é‚£æ ·ç”Ÿæ´»ã€‚è¿™è®©æˆ‘èƒ½å¤Ÿ_ç›¸å¯¹_ç‹¬ç«‹äºä½ å½“åœ°çš„`å¤§å…¬å¸`æœ€è¿‘åœ¨æçš„ä»»ä½•é‚ªæ¶è®¡åˆ’(_æç¤º_:å¾ˆå¯èƒ½æ˜¯æŸç§è®¢é˜…æœåŠ¡)ã€‚

è¿™åŸºæœ¬ä¸Šå°±æ˜¯ Linux å’Œ Firefox çš„è®ºç‚¹ - ç«äº‰æ˜¯å¥½äº‹,è‡ªç”±ä¹Ÿæ˜¯ã€‚

å¦‚æœè¿™å¯¹ä½ æ¥è¯´å¤ªæŠ½è±¡äº†,é‚£ä¹ˆè¿™ç¯‡æ–‡ç« _çœŸæ­£_è¦è®²çš„æ˜¯,å®ƒèƒ½æ•™ä¼šä½ å¾ˆå¤šä¸œè¥¿,è¿™æ˜¯æˆ‘è®¤ä¸ºä¸è¨€è€Œå–»çš„çœŸç†:å­¦ä¹ æ˜¯æœ‰ç›Šä¸”æœ‰ç”¨çš„ã€‚

äº‹å®è¯æ˜,å¼ºè¿«è‡ªå·±è¦ä¹ˆåšä¸€äº›ä½ ä¸æ˜¯æ¯å¤©éƒ½åšçš„äº‹æƒ…,è¦ä¹ˆæé«˜ä½ å¶å°”åšçš„äº‹æƒ…çš„æ°´å¹³,æˆ–è€…ä»…ä»…æ˜¯å­¦ä¹ ä¸€äº›å¬èµ·æ¥æœ‰è¶£çš„ä¸œè¥¿,éƒ½èƒ½è®©ä½ å˜å¾—æ›´å¥½ã€‚è¿™æ˜¯ä¸ªç–¯ç‹‚çš„æ¦‚å¿µ,æˆ‘çŸ¥é“ã€‚

åœ¨æˆ‘çš„å®é™…å·¥ä½œä¸­,æˆ‘ä¸æ˜¯ç³»ç»Ÿç®¡ç†å‘˜,è€Œæ˜¯ä¸€åè½¯ä»¶å·¥ç¨‹å¸ˆã€‚æˆ‘ä»äº‹å¤§å‹åˆ†å¸ƒå¼æ•°æ®å¤„ç†ç³»ç»Ÿçš„å·¥ä½œã€‚æˆ‘çœŸçš„å¼€å§‹åŒæ¶"æ•°æ®å·¥ç¨‹å¸ˆ"è¿™ä¸ªå¤´è¡”(è¿™æ˜¯å¦ä¸€ä¸ªæ•…äº‹äº†),æ‰€ä»¥æˆ‘ä¸ä¼šç”¨å®ƒã€‚ä½†æ˜¯,åœ¨`$é…·ç‚«ç½‘ç»œåˆ›ä¸šå…¬å¸`é¢†å¯¼æ•°æ®åŸºç¡€è®¾æ–½å·¥ä½œçš„æ™®é€šä¸€å¤©,æˆ‘é€šå¸¸ä¼šåšä»¥ä¸‹ä¸€é¡¹æˆ–å¤šé¡¹å·¥ä½œ:

-   ä¼šè®®ã€åŠå…¬æ—¶é—´ã€æ¶æ„è®¨è®º,è¯¸å¦‚æ­¤ç±»
-   å†™å¸¦æœ‰æœ‰è¶£é¢œè‰²çš„æ–‡æœ¬,è¿™äº›å¤©ä¸»è¦æ˜¯`Python`ã€`Scala`ã€`go`ã€`typescript`å’Œ`sql`
-   å¤„ç†å®é™…çš„åŸºç¡€è®¾æ–½å’Œå·¥å…·:K8sã€Terraformã€Dockerã€VPCsã€EC2sã€nix ç­‰æœ‰è¶£çš„ä¸œè¥¿
-   å¯èƒ½ç›¸å…³çš„æ˜¯,ç›¯ç€ AWS æˆæœ¬æµè§ˆå™¨æˆ–ç”µå­è¡¨æ ¼
-   ç…§çœ‹ä¸€å †å¼€æºæœåŠ¡,ç®¡ç†æ›´æ–°ç­‰
-   ä¿æŒé¡¹ç›®ç®¡ç†å†…å®¹åˆç†æ›´æ–°å’Œå¯å±•ç¤º
-   ç­‰ç­‰

æˆ‘ç¡®å®ä¸ç³»ç»Ÿç®¡ç†å‘˜çš„å·¥ä½œæœ‰ä¸€äº›åˆç†çš„é‡å ,ä¸»è¦æ˜¯å› ä¸ºæˆ‘æ”¯æŒå¼€æºè½¯ä»¶,å› æ­¤å†³å®šä½¿ç”¨å’Œ[æ‰˜ç®¡][25]å„ç§å¼€æºå·¥å…·ä½œä¸ºæˆ‘ä»¬æ•°æ®æ ˆçš„ä¸€éƒ¨åˆ†ã€‚è™½ç„¶å¤§éƒ¨åˆ†éƒ½å¾ˆç¨³å®š,ä½†å¶å°”ç¡®å®éœ€è¦ä¸€äº›åŸºç¡€çš„ Linux æŠ€å·§æ¥è®©ä¸€åˆ‡å›åˆ°æ­£è½¨ã€‚

## ç†è§£å¤æ‚ç³»ç»Ÿ

è¯è™½å¦‚æ­¤ï¼Œæˆ‘å¾ˆå°‘éœ€è¦é€šè¿‡`ssh`ç™»å½•åˆ°éšæœºçš„ Linux æœºå™¨ä¸Šå»æ£€æŸ¥`nginx`ã€‚è¿™å¹¶ä¸æ˜¯è¯´è¿™ç§æƒ…å†µ_ä¸ä¼š_å‘ç”Ÿ - åªæ˜¯_ä¸ç»å¸¸_å‘ç”Ÿã€‚

è€Œå½“å®ƒ_ç¡®å®_å‘ç”Ÿæ—¶ï¼Œèƒ½å¤Ÿé€šè¿‡æ·±å…¥ç†è§£åº•å±‚æŠ€æœ¯è€Œä¸æ˜¯ä»…åœç•™åœ¨è¡¨é¢æ¥åˆ†æå¤æ‚ç³»ç»Ÿæ˜¯éå¸¸æœ‰å¸®åŠ©çš„ã€‚

è‡ªæ‰˜ç®¡æ‰€æœ‰è¿™äº›æœåŠ¡ - ç‰¹åˆ«æ˜¯å½“å®ƒä»¬è®©ä½ æ¯”ä»…ä»…å¤åˆ¶ç²˜è´´å‘½ä»¤æ›´æ·±å…¥åœ°æ¢ç´¢æŠ€æœ¯ç»†èŠ‚æ—¶ - ä¼šæ•™ä¼šä½ å¾ˆå¤šæœ‰ç”¨çš„æ–°çŸ¥è¯†ã€‚

è®©æˆ‘ä¸¾å‡ ä¸ªç°å®ä¸–ç•Œçš„ä¾‹å­ - é€šå¸¸ï¼ŒåŸºç¡€çš„ Linux_ç®¡ç†_çŸ¥è¯†å°±èƒ½æ´¾ä¸Šç”¨åœºã€‚è·å–è¿™äº›çŸ¥è¯†æœ€å¥½çš„æ–¹å¼æ˜¯è¦ä¹ˆæ—¥å¸¸ä½¿ç”¨ Linuxï¼ˆå°±æˆ‘ä¸ªäººè€Œè¨€ï¼Œç°åœ¨ä½¿ç”¨çš„æ˜¯ macOSï¼‰...è¦ä¹ˆè‡ªæ‰˜ç®¡å’Œè‡ªæˆ‘ç®¡ç†æœåŠ¡å™¨ã€‚

ä¾‹å¦‚ï¼ŒçŸ¥é“è®¾ç½®[swapiness][26]å¾ˆå°‘æœ‰ç”¨ï¼Œå¹¶åœ¨ä»£ç å®¡æŸ¥ä¸­æŒ‡å‡ºè¿™ä¸€ç‚¹ï¼›æˆ–è€…çŸ¥é“ä¿®æ”¹[`LD_LIBRARY_PATH`][27]å¿…ç„¶ä¼šå¸¦æ¥éº»çƒ¦ã€‚ä¸è¿‡ï¼Œæ„è¯†åˆ°è¿™ä¸¤è€…_å¯èƒ½_åœ¨ç‰¹æ®Šæƒ…å†µä¸‹æ˜¯æœ‰æ•ˆçš„å·¥å…·ä¹Ÿå¾ˆé‡è¦ï¼ˆå¯¹äºåè€…ï¼Œæˆ‘ä»¬æ··åˆä½¿ç”¨`poetry`å’Œ`nix`ï¼Œä½ å¯ä»¥æƒ³è±¡ä¼šå‘ç”Ÿä»€ä¹ˆï¼‰ã€‚

å½“ç„¶ï¼Œç»´æŠ¤åˆ†å¸ƒå¼åŸºç¡€è®¾æ–½ï¼ˆå¦‚ Proxmoxï¼‰æˆ–[ä»å¤´å¼€å§‹ç¼–å†™ä¸€ä¸ª][28]ä¹Ÿæœ‰åŠ©äºç»´æŠ¤ã€è®¾è®¡å’Œ/æˆ–å®ç°è·¨è¶Šå¤šä¸ªæ¦‚å¿µçš„_å…¶ä»–_å¤æ‚åˆ†å¸ƒå¼ç³»ç»Ÿã€‚

æˆ‘åœ¨å·¥ä½œä¸­çš„ä¸€ä¸ªä¸ªäººé¡¹ç›®æ˜¯ä¸€ä¸ª[Apache Flink][29]ç®¡é“ï¼ˆæœ¬èº«å°±æ˜¯ä¸€ä¸ªå›ºæœ‰çš„åˆ†å¸ƒå¼æ¡†æ¶ï¼‰ï¼Œä½¿ç”¨ Scala 3 ç¼–å†™ï¼Œé€šè¿‡[magnolia][30]å’Œ[avro4s][31]è¿›è¡Œç±»å‹ç±»æ¨å¯¼ï¼Œå°†[protobuf][32]æ¶ˆæ¯é€šè¿‡[Kafka][34]è½¬æ¢ä¸º[Apache Iceberg][33]ï¼ˆå®ƒè¿˜åšäº†æ›´å¤šäº‹æƒ…ï¼Œä½†è¿™äº›æ˜¯åŸºç¡€éƒ¨åˆ†ï¼‰ã€‚è¿™ä¸ªé¡¹ç›®æ¶‰åŠäº†ä»¥ä¸‹æ¦‚å¿µçš„æ·±å…¥ç†è§£ï¼Œè¿™äº›æ¦‚å¿µ_ä¸æ˜¯_æ ¸å¿ƒçš„"ç¼–ç¨‹"ä»»åŠ¡ï¼Œè€Œæ˜¯_é¢å¤–_çš„å†…å®¹ï¼ˆå› ä¸ºå®ƒæ˜¯`scala`ï¼Œè¿˜åŒ…æ‹¬åƒ tagless final è¿™æ ·çš„å†…å®¹ï¼‰ï¼š

VPC å’Œå¤§é‡ç½‘ç»œçŸ¥è¯†ã€Kubernetesã€GRPCã€exactly-once/at-least-once è¯­ä¹‰ã€æœ€ç»ˆä¸€è‡´æ€§ã€äº‹åŠ¡é”ã€ä¸€äº›[ç¼–è¯‘å™¨æ„å»º][35]ã€protobuf å’Œæ¨¡å¼æ¼”è¿›ã€Kafkaï¼ˆæˆ–é€šç”¨æ•°æ®å­˜å‚¨å¤åˆ¶å’Œå¤šç§Ÿæˆ·ï¼‰ã€blob å­˜å‚¨ã€å¤§é‡çš„æŒ‡æ ‡å’Œç›‘æ§ï¼ˆå› æ­¤ä¹ŸåŒ…æ‹¬æ—¶åºæ•°æ®åº“ï¼Œå§‘ä¸”è¿™ä¹ˆè¯´ï¼‰ç­‰ç­‰ã€‚

![è¿™æ˜¯æˆ‘ä»¬ç¤¾åŒºè°·ä»“çŒ«çš„ç…§ç‰‡ï¼Œè¿™æ ·å½“æˆ‘ä»¬è®¨è®ºprotobufç¼–è¯‘å™¨æ—¶ä½ å°±ä¸ä¼šå¤ªæ— èŠ][90]

è¿™æ˜¯æˆ‘ä»¬ç¤¾åŒºè°·ä»“çŒ«çš„ç…§ç‰‡ï¼Œè¿™æ ·å½“æˆ‘ä»¬è®¨è®º protobuf ç¼–è¯‘å™¨æ—¶ä½ å°±ä¸ä¼šå¤ªæ— èŠ[æ‹æ‘„ï¼šæˆ‘][36]

å½“ç„¶ï¼Œå¦‚æœä½ æ˜¯ä¸€ä¸ªæœ‰ç»éªŒçš„å·¥ç¨‹å¸ˆï¼Œä¹‹å‰å·²ç»æ¥è§¦è¿‡åˆ†å¸ƒå¼ç³»ç»Ÿï¼Œè¿™äº›ä¸»é¢˜å¯èƒ½éƒ½ä¸ä¼šæ˜¾å¾—ç‰¹åˆ«æ–°é¢–æˆ–å¯æ€• - ä½†å…³é”®æ˜¯ï¼Œå…¶ä¸­å¾ˆå¤šå†…å®¹éƒ½ä¸è‡ªæ‰˜ç®¡è½¯ä»¶æ—¶é‡åˆ°çš„é—®é¢˜æœ‰é‡å  - äº‹å®ä¸Šï¼Œåœ¨æˆ‘æåˆ°çš„ 11 ä¸ªå·¦å³çš„è¦ç‚¹ä¸­ï¼Œæˆ‘æ•¢è¯´åœ¨æˆ‘çš„è‡ªæ‰˜ç®¡å†ç¨‹ä¸­è‡³å°‘æ¥è§¦è¿‡å…¶ä¸­çš„ 8 ä¸ªã€‚

æœ€åï¼Œå¦‚ä¸Šæ‰€è¿°ï¼Œåœ¨`work`ä¸­æˆ‘ä¹Ÿ"æ‹¥æœ‰"ï¼ˆåœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¿™ä¸æ˜¯ä¸€ä¸ªå¾ˆç³Ÿç³•çš„"ä¼ä¸š"ç”¨è¯­å—ï¼Ÿï¼‰å‡ ä¸ªå¼€æºå·¥å…·ï¼Œæˆ‘ä»¬åœ¨ Kubernetes ä¸Šè‡ªæ‰˜ç®¡å¹¶è¿›è¡Œå†…éƒ¨ä½¿ç”¨ï¼Œæ¯”å¦‚[Apache Superset][37]ã€‚è¿™ä¸æœ¬æ–‡ä¸»é¢˜çš„ç›¸ä¼¼ä¹‹å¤„åº”è¯¥ç›¸å½“æ˜æ˜¾ã€‚:-)

## è¿‡å» 6 ä¸ªæœˆå‡ºç°çš„é—®é¢˜

å¥½å§,å¬èµ·æ¥å¾ˆæœ‰ç”¨ã€‚ä½†è¿˜è®°å¾—æˆ‘è¯´è¿‡"è¿™éœ€è¦å¤§é‡å·¥ä½œ"å—?åœ¨è¿‡å»å¤§çº¦ 6 ä¸ªæœˆé‡Œ,å‘ç”Ÿäº†ä»¥ä¸‹è¿™äº›äº‹æƒ…(æˆ‘ç›¸ä¿¡è¿™è¿˜ä¸æ˜¯å®Œæ•´çš„æ¸…å•):

- æˆ‘ä»¬é‡åˆ°äº†æ–­ç”µ,è€Œ UPS æœ¬åº”è´Ÿè´£ä¸ºæœåŠ¡å™¨å’Œå®¶åº­ç½‘ç»œæä¾›å¤‡ç”¨ç”µæº,ä½†å®ƒå°±æ˜¯...ä¸å·¥ä½œ
- å› æ­¤,æˆ‘ä»¬çš„ç½‘ç»œ(å­˜åœ¨å•ç‚¹æ•…éšœ)åœ¨æŸå°æœåŠ¡å™¨å®•æœºæ—¶å°±å®Œå…¨ç˜«ç—ªäº†
- æˆ‘å”¯ä¸€å¤–åŒ…è¿ç»´çš„ VPS æœåŠ¡å™¨éšæœºç¦»çº¿äº†å°†è¿‘ä¸€å‘¨
- æˆ‘çš„ä¸€å° Proxmox ä¸»æœºæ¯å¤©æ™šä¸Šéƒ½ä¼šå‡†æ—¶åœ¨ 23:25 å´©æºƒ,ç„¶ååœ¨ 23:40 é‡æ–°ä¸Šçº¿

## è¿‡å» 6 ä¸ªæœˆå­¦åˆ°(æˆ–å›é¡¾)çš„ç»éªŒ

é‚£ä¹ˆ,è®©æˆ‘å¿«é€Ÿåˆ†äº«ä¸€ä¸‹åœ¨è¿™æ®µæ—¶é—´å†…æˆ‘åšçš„ä¸€äº›äº‹æƒ…,éƒ¨åˆ†æ˜¯ä¸ºäº†è§£å†³ä¸Šè¿°é—®é¢˜,éƒ¨åˆ†å‡ºäºå¥½å¥‡,ä»¥åŠæˆ‘ä»ä¸­å­¦åˆ°å’Œå›é¡¾çš„ç»éªŒã€‚

### ä½ å¯ä»¥è‡ªæ‰˜ç®¡ VS Code

è¿™æ˜¯ä¸€ä¸ªç®€å•ä½†å¾ˆå·§å¦™çš„å‘ç°:VS Code çš„æ“ä½œç³»ç»Ÿéƒ¨åˆ†å¯ä»¥åœ¨æµè§ˆå™¨ä¸­è¿è¡Œã€‚è¿™ä¸ GitHub çš„ codespaces ä½¿ç”¨ç›¸åŒçš„æ¦‚å¿µ,ä½†æ˜¯è‡ªæ‰˜ç®¡:[https://github.com/coder/code-server][38]

è¿™åœ¨ iPad æˆ– Mac(æˆ– Windows)ç­‰éœ€è¦ Linux ç¯å¢ƒçš„è®¾å¤‡ä¸Šä½¿ç”¨ VS Code éå¸¸æœ‰ç”¨ã€‚æˆ‘çš„è¿è¡Œåœ¨`Ubuntu`ä¸Šã€‚

![åœ¨iPhoneä¸Šå¥½ç”¨å—?å‘ƒ...][91]

åœ¨ iPhone ä¸Šå¥½ç”¨å—?å‘ƒ... [æ‹æ‘„:æˆ‘][39]

æˆ‘åœ¨æ€è€ƒå¦‚ä½•è®©æˆ‘é‚£å°ä»·æ ¼ä¸è²çš„ iPad Pro æ›´æœ‰ç”¨æ—¶å¶ç„¶å‘ç°äº†è¿™ä¸ªã€‚äº‹å®è¯æ˜,ä½ ç¡®å®å¯ä»¥!æˆ‘ä¸æ˜¯è¯´ä½ _åº”è¯¥_è¿™ä¹ˆåš,ä½†ä½ _å¯ä»¥_ã€‚

### UPS ç”µæ± ä¼šæ‚„æ— å£°æ¯åœ°æ­»äº¡,è€Œä¸”æ¯”ä½ æƒ³è±¡çš„æ›´å¿«

UPS ç”µæ± ,è‡³å°‘åƒæˆ‘è¿™ç§ç®€å•çš„ 1U Cyberpower 1500VA æ¶ˆè´¹çº§äº§å“,åªèƒ½ç”¨å¤§çº¦_3 å¹´_ã€‚æˆ‘çš„ç”µæ± å·²ç» 4 å¹´äº†,_å®Œå…¨_æŠ¥åºŸäº†ã€‚è™½ç„¶æˆ‘åœ¨æ¦‚å¿µä¸ŠçŸ¥é“ä¸æ˜¯æ‰€æœ‰ä¸œè¥¿éƒ½åƒé”‚ç”µæ± é‚£æ ·å¯¿å‘½é•¿,ä½†æˆ‘_æ²¡æƒ³åˆ°_å®ƒä»¬ä¼šè¿™ä¹ˆå¿«å°±è¾¾åˆ°"æ— æ³•ä½¿ç”¨"çš„ç¨‹åº¦ã€‚

åœ¨ç»å†äº†è¿™é‡Œå¸¸è§çš„æ–­ç”µå’Œç”µå‹ä¸ç¨³å,æˆ‘æ‰ç—›è‹¦åœ°æ„è¯†åˆ°è¿™ä¸€ç‚¹,ç½‘ç»œä¼šçœ‹ä¼¼éšæœºåœ°æ–­å¼€ã€‚äº‹å®è¯æ˜,æ²¡æœ‰å†—ä½™ DNS çš„è¯,äº’è”ç½‘å°±æ— æ³•å·¥ä½œã€‚

æ›´æ¢è¿™äº›ç”µæ± å…¶å®å¾ˆç®€å•(æ„Ÿè°¢ RefurbUPS)ã€‚ç°åœ¨,æˆ‘å®é™…ä¸Šæ¯æœˆéƒ½ä¼šå®‰æ’è¿è¡Œ`powerst -test`,å¹¶ä¼šæ›´é¢‘ç¹åœ°æµ‹è¯•å…¶ä»–æ¨¡æ‹Ÿå¤‡ç”¨ç”µæ± ã€‚

![pwrstat][92]

pwrstat [æ‹æ‘„ï¼šæˆ‘][40]

### å†—ä½™ DNS å°±æ˜¯å¥½ DNS

æˆ‘ä»¬éƒ½çŸ¥é“ DNS æœ¬è´¨ä¸Šæ˜¯å†—ä½™çš„ã€å…¨çƒåˆ†å¸ƒçš„,å¹¶ä¸”æœ€ç»ˆä¸€è‡´çš„ã€‚ä½†å®é™…ä¸Šæˆ‘ä»æœªåŒæ—¶_æ‰˜ç®¡_è¿‡ 2 ä¸ª DNS ç¼“å­˜ã€‚

æˆ‘ä¹‹å‰æ²¡è¿™ä¹ˆåšçš„åŸå› æ˜¯ - æˆ‘ä½¿ç”¨ Pi-Hole,å®ƒè¿è¡Œ`dnsmasq`ã€‚æˆ‘_è¿˜_æŠŠå®ƒç”¨ä½œ DHCP æœåŠ¡å™¨,ä»¥ä¾¿æŸ¥çœ‹å“ªå°æœºå™¨è¿è¡Œäº†å“ªäº› DNS æŸ¥è¯¢ã€‚æ‰€ä»¥å‡ºäºæ‡’æƒ°å’Œä¾¿åˆ©çš„è€ƒè™‘,å°† DHCP ä» Pi-Hole ç•Œé¢ç§»å‡ºæ˜¯å¾ˆéº»çƒ¦çš„ã€‚

ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜,æˆ‘ä½¿ç”¨ RouterOS(Mikrotik)ä¸ºæ¯ä¸ªè®¾å¤‡å’Œ VLAN/IP æ± è®¾ç½®é™æ€ IP,å¹¶é‡æ–°å¯ç”¨äº† DHCP æœåŠ¡å™¨ã€‚å¯¹äºä¸ä½¿ç”¨ Pi-Hole è€Œä½¿ç”¨å…¬å…± DNS çš„éå®¶åº­ VLAN,æˆ‘_å·²ç»_è¿™æ ·åšäº†ã€‚

![VLAN][93]

VLAN [æ‹æ‘„ï¼šæˆ‘][41]

æˆ‘ä¹Ÿå€Ÿæ­¤æœºä¼šå°† IP èŒƒå›´æ˜ å°„åˆ°ç‰©ç†è®¾å¤‡ã€‚

ç„¶åæˆ‘ä½¿ç”¨è¯¥æ˜ å°„åœ¨ Pi-Hole ä¸­å°†ä¸»æœºåæ˜ å°„åˆ° IP:

![DNSæ˜ å°„][94]

DNS æ˜ å°„ [æ‹æ‘„ï¼šæˆ‘][42]

ä¹‹å,åªéœ€åœ¨ RouterOS ä¸­é…ç½®ä¸¤å° Pi-Hole æœåŠ¡å™¨,ä½¿å®ƒä»¬éƒ½å¯ç”¨äºå®¢æˆ·ç«¯ã€‚è¿™å°±æ˜¯ç©·äººç‰ˆçš„é«˜å¯ç”¨æ€§!

ç”±äºæˆ‘ä»¬ä¸ç»å¸¸æ·»åŠ è®¾å¤‡(è€Œä¸”æˆ‘ä¼šå°†æ‰€æœ‰_éœ€è¦_DNS åç§°çš„æœåŠ¡æ·»åŠ åˆ°[heimdall][43]),é€šè¿‡æŸ¥çœ‹ Pi-Hole æ—¥å¿—æ‰‹åŠ¨å¤åˆ¶é…ç½®å°±è¶³å¤Ÿäº†ã€‚

æˆ‘å·²ç»æŠŠæ‰˜ç®¡[orbital-sync][44]åˆ—å…¥è®¡åˆ’,ä»¥è¿›ä¸€æ­¥ç®€åŒ–è¿™ä¸ªè¿‡ç¨‹ã€‚

åœ¨è¿™ä¸€ç‚¹ä¸Š,ä½ _ä¹Ÿå¯ä»¥_é€šè¿‡é’ˆå¯¹ 53 ç«¯å£ UDP æµé‡çš„é˜²ç«å¢™è§„åˆ™æ¥å¼ºåˆ¶ä½¿ç”¨è¿™äº› DNS æœåŠ¡å™¨(è¿™åœ¨æœ‰å­©å­æˆ–å·¥ä½œç¯å¢ƒä¸­å¯èƒ½æ˜¯ä¸ªå¥½ä¸»æ„)ã€‚RouterOS å¯ä»¥è½»æ¾å®ç°è¿™ä¸€ç‚¹ã€‚

### æ ‘è“æ´¾å¯ä»¥è¿è¡Œ ARM ç‰ˆ Proxmox,è€Œæ™®é€š Proxmox ä¸è¡Œ

é€šå¸¸æƒ…å†µä¸‹,Proxmox åªæ”¯æŒ x86 æ¶æ„ã€‚

ä½†æ˜¯,è¿™ä¸ª GitHub ä¸Šçš„[ä»“åº“][45]å¯ä»¥è®© Proxmox æ”¯æŒ ARM æ¶æ„ã€‚æ­£å› å¦‚æ­¤,æˆ‘çš„å°æ ‘è“æ´¾ 5 ç°åœ¨æˆä¸ºäº†ä¸€ä¸ª Proxmox èŠ‚ç‚¹,è¿è¡Œç€ UniFi å’Œå…¶ä¸­ä¸€ä¸ª Pi-Holeã€‚

ä¸æ¨èä¸”ä¸å—æ”¯æŒ?å½“ç„¶!å°±åƒé€šè¿‡ USB è®¾å¤‡ä½¿ç”¨`zfs`ä¸€æ ·ã€‚ä½†å®ƒå°±æ˜¯èƒ½ç”¨(åœ¨åˆç†èŒƒå›´å†…)!

![PromoxèŠ‚ç‚¹][95]

Promox èŠ‚ç‚¹ [æ‹æ‘„:æˆ‘][46]

æˆ‘åˆšæ‰æåˆ°äº†"ç©·äººç‰ˆçš„é«˜å¯ç”¨æ€§":æœ‰è¶£çš„æ˜¯,[Linus Tech Tips][47]æœ€è¿‘åšäº†ä¸€ä¸ªå…³äº Proxmox æ­£å¼ç‰ˆ H/A è™šæ‹Ÿæœºå’Œæ•…éšœè½¬ç§»çš„è§†é¢‘ã€‚æˆ‘çš„ DNS è®¾ç½®è™½ç„¶ä¸æ˜¯é‚£æ ·,ä½†_å¯ä»¥_åšåˆ°,å› ä¸ºç°åœ¨æˆ‘æœ‰ 3 ä¸ªèŠ‚ç‚¹äº†,å¤šäºäº†æˆ‘è¿™ä¸ªæ”¹è£…è¿‡çš„ ARM èŠ‚ç‚¹ã€‚å°±åƒä»–ä»¬è¯´çš„:ä¸‰ä¸ªèŠ‚ç‚¹æ‰èƒ½æ„æˆæ³•å®šäººæ•°,å®è´!

_å†è¡¥å……ä¸€ç‚¹_:æˆ‘ç¬¬ä¸€æ¬¡æ¥è§¦"æ³•å®šäººæ•°"è¿™ä¸ªæ¦‚å¿µæ˜¯åœ¨æ—©æœŸçš„`hadoop`æ—¶ä»£,é‚£æ—¶å€™æ‰‹åŠ¨é…ç½®`zookeeper`ã€`hdfs`ç­‰å¹¶ç¡®ä¿é›†ç¾¤èƒ½å½¢æˆæ³•å®šäººæ•°æ˜¯éå¸¸é‡è¦çš„ã€‚è¿™è‚¯å®šæ¯”"åªéœ€éƒ¨ç½²è¿™ä¸ªä½œä¸šåˆ° AWS"è¦å¤æ‚å¾—å¤š(æˆ‘ä¹Ÿä¸æƒ³å†é‚£æ ·åšäº†),ä½†å®ƒç¡®å®è®©æˆ‘å­¦åˆ°äº†å¾ˆå¤šå…³äºå…¶ä¸­è¿ä½œåŸç†çš„çŸ¥è¯†!

### `zfs` + Proxmox ä¼šåƒæ‰å†…å­˜å¹¶å¯¼è‡´è™šæ‹Ÿæœºè¢« OOM æ€æ­»

ä½ çŸ¥é“ OOM æ€æ­»åœ¨`$currentYear`å¹´è¿˜æ˜¯"ä¸€ä¸ªé—®é¢˜"å—?ç¡®å®å¦‚æ­¤!æˆ‘è¿è¡Œç€å¸¦[SAS HBA ç›´é€šæ¨¡å¼][48]çš„`TrueNAS Scale`,å½“ Proxmox å¤‡ä»½å’Œè®¾å¤‡å¤‡ä»½åŒæ—¶è¿è¡Œæ—¶,æˆ‘çš„æœºå™¨å¶å°”ä¼šè¢« OOM æ€æ­»ã€‚

è¯´åˆ°è¿™é‡Œ - ç”¨è¿™ç§é…ç½®è¿è¡Œ TrueNAS ä¹Ÿæ˜¯ä¸å—æ”¯æŒ/ä¸æ¨èçš„,å› ä¸º TrueNAS å¸Œæœ›ç›´æ¥è¿è¡Œåœ¨ç‰©ç†æœºä¸Šã€‚

æ€»ä¹‹,Proxmox é»˜è®¤ä¼šä½¿ç”¨é«˜è¾¾ 50%çš„å†…å­˜ä½œä¸º`zfs`ç¼“å­˜,å†åŠ ä¸Šè™šæ‹Ÿæœºè¢«é…ç½®ä¸ºä½¿ç”¨~80%çš„å†…å­˜,åœ¨ RAM æœ‰é™çš„ç¯å¢ƒä¸‹ - è€Œä¸”å‡ ä¹å…¨æ˜¯ä»å…¶ä»–ç”µè„‘æ”¶é›†æ¥çš„æ—§å†…å­˜æ¡ - è¿™æ ·è¿è¡Œæ•ˆæœå¹¶ä¸å¥½ã€‚

ä½†æ˜¯,åŸæ¥ä½ å¯ä»¥åœ¨ ZFS å†…æ ¸è®¾ç½®ä¸­[é…ç½®][49]è¿™ä¸ªå‚æ•°!

```bash
echo 'options zfs zfs_arc_max="8589934592"' >> /etc/modprobe.d/zfs.conf
update-initramfs -u
```

è¿™æ ·å¯ä»¥å°†`zfs`é™åˆ¶åœ¨ 8 GiB å†…å­˜ä½¿ç”¨é‡ã€‚

### éšæœºå´©æºƒä¹‹è°œ(æ˜¯ç¡¬ä»¶é—®é¢˜å—?ä¸€ç›´éƒ½æ˜¯ç¡¬ä»¶é—®é¢˜ã€‚)

æˆ‘çš„ä¸€å° Proxmox ä¸»æœºæ¯å¤©æ™šä¸Šéƒ½ä¼šå‡†æ—¶åœ¨ 23:25 å´©æºƒ,ç„¶ååœ¨ 23:40 é‡æ–°ä¸Šçº¿ã€‚è¿™æ˜¯ç›‘æ§æ•°æ®:

![TBD][96]

TBD [æ‹æ‘„:æˆ‘][50]

è™½ç„¶å®ƒ_ç¡®å®_ä¼šè‡ªåŠ¨é‡å¯,åŒ…æ‹¬è™šæ‹Ÿæœº,ä½†å½“ç„¶æ— æ³•è§£å¯†`zfs`å­˜å‚¨æ± ã€‚æˆ‘åªæ˜¯åœ¨ Mac çš„ TimeMachine å¤‡ä»½å¤±è´¥æ—¶æ‰æ³¨æ„åˆ°è¿™ä¸ªé—®é¢˜!

å¥½å§,æŸ¥çœ‹æ—¥å¿—å‘ç°:23:25 æ˜¯å¦ä¸€ä¸ª Proxmox èŠ‚ç‚¹å°†å…¶è™šæ‹Ÿæœºå¤‡ä»½åˆ°è¿™å°æœåŠ¡å™¨çš„æ—¶é—´,å¤‡ä»½åˆ°ä¸€ä¸ªå•ä¸€çš„ã€éå†—ä½™çš„è€ç¡¬ç›˜ä¸Š,å…¶ SMART å€¼å¦‚ä¸‹:

```plain
Error 4 occurred at disk power-on lifetime: 27469 hours (1144 days + 13 hours)
  When the command that caused the error occurred, the device was active or idle.

  After command completion occurred, registers were:
  ER ST SC SN CL CH DH
  -- -- -- -- -- -- --
  04 51 00 ff ff ff 0f

  Commands leading to the command that caused the error were:
  CR FR SC SN CL CH DH DC   Powered_Up_Time  Command/Feature_Name
  -- -- -- -- -- -- -- --  ----------------  --------------------
  ea 00 00 00 00 00 a0 00   6d+03:38:11.728  FLUSH CACHE EXT
  61 00 08 ff ff ff 4f 00   6d+03:38:11.726  WRITE FPDMA QUEUED
  61 00 08 ff ff ff 4f 00   6d+03:38:11.726  WRITE FPDMA QUEUED
  61 00 08 ff ff ff 4f 00   6d+03:38:11.725  WRITE FPDMA QUEUED
  61 00 b0 ff ff ff 4f 00   6d+03:38:11.725  WRITE FPDMA QUEUED
```

...è¿™å¯¼è‡´äº†å„ç§å¥‡æ€ªçš„æ­»é”,ä½¿å¾—æœºå™¨æ— å“åº”å¹¶è¢«æ€æ­»ã€‚

![LibreNMSç›‘æ§][97]

LibreNMS ç›‘æ§ [æ‹æ‘„:æˆ‘][51]

æ›´æ¢ç¡¬ç›˜å,é—®é¢˜è§£å†³ã€‚å°±æ˜¯è¿™ä¹ˆç®€å•ã€‚

`å¤§ç¡¬ç›˜å‚å•†`ä¼šå‘Šè¯‰ä½ _åªèƒ½_ä½¿ç”¨é—ªäº®çš„ã€æ–°çš„ã€fancy çš„ã€æ˜‚è´µçš„ç¡¬ç›˜,ä½†åœ°ä¸‹å®¤é‡Œè£…ç€æœåŠ¡å™¨æœºæ¶çš„äººä¼šå‘Šè¯‰ä½ ,äº‹å®ä¸Š,ä½ å®Œå…¨å¯ä»¥é‡å¤ä½¿ç”¨é‚£äº›å¤è€çš„ã€å„å¼å„æ ·çš„ç¡¬ä»¶æ¥åšä¸€äº›ä¸é‚£ä¹ˆé‡è¦çš„å¤‡ä»½,è€Œä¸”åŸºæœ¬ä¸Š~ä¸ä¼š~å‡ ä¹ä¸ä¼šå‡ºé—®é¢˜!

### SNMP(v3)ä»ç„¶å¾ˆé…·

æˆ‘é€šè¿‡æé†’æ¥è¿‡æ´»ã€‚æˆ‘çš„å¾…åŠæ¸…å•ä¸Šæœ‰ä¸€é¡¹å·²ç»å­˜åœ¨ä¸€æ®µæ—¶é—´äº†:"è‡ªåŠ¨åŒ–ç½‘ç»œæ˜ å°„å’Œå‘Šè­¦"ã€‚äº‹å®è¯æ˜,è¿™æ˜¯ä¸€ä¸ªå·²è§£å†³çš„é—®é¢˜,å³ä½¿_ä¸ä½¿ç”¨_ç°ä»£çš„ç›‘æ§å’Œè¿½è¸ªè§£å†³æ–¹æ¡ˆ,å¦‚ Datadog(é¡ºä¾¿è¯´ä¸€ä¸‹,æˆ‘å¾ˆå–œæ¬¢å®ƒ)ã€Jaegerã€Prometheus ç­‰ã€‚

ä¸Šé¢é‚£äº›å…³äºç¡¬ç›˜è¡°é€€çš„å›¾è¡¨?æ¥è‡ª[LibreNMS][52]!

å®ƒä½¿ç”¨ç®€å•ç½‘ç»œç®¡ç†åè®®([SNMP][53])ã€‚è¿™æ˜¯ä¸€ä¸ªæ¥è‡ª 80 å¹´ä»£çš„å¤è€åè®®,_æ­£å¥½_å¯ä»¥åšåˆ°è¿™ä¸€ç‚¹:ç›‘æ§ä½ çš„è®¾å¤‡ã€‚æˆ‘ä¹‹å‰ä¸€ç›´æ²¡æœ‰å»è®¾ç½®å®ƒ,å› ä¸ºå¯¹ç°ä»£äººæ¥è¯´è¿™æ˜¯ä¸€ä¸ªæœ‰ç‚¹æ™¦æ¶©çš„åè®®ã€‚è™½ç„¶æˆ‘ä¸å…è®¸å…¥ç«™æµé‡(æˆ‘ä»¬ç”¨[ngrok][54]æ¥å¤„ç†),ä½†ä¸€ä¸ªåæ‰§çš„ç³»ç»Ÿç®¡ç†å‘˜æ‰æ˜¯å¥½ç³»ç»Ÿç®¡ç†å‘˜ã€‚

> SNMP ä¾èµ–äºå®‰å…¨å­—ç¬¦ä¸²(æˆ–"å›¢ä½“å­—ç¬¦ä¸²"),è¿™äº›å­—ç¬¦ä¸²æˆäºˆå¯¹è®¾å¤‡ç®¡ç†å¹³é¢éƒ¨åˆ†çš„è®¿é—®æƒé™ã€‚SNMP çš„æ»¥ç”¨å¯èƒ½å…è®¸æœªç»æˆæƒçš„ç¬¬ä¸‰æ–¹è®¿é—®ç½‘ç»œè®¾å¤‡ã€‚
> 
> åº”è¯¥åªä½¿ç”¨ SNMPv3,å› ä¸º SNMPv3 å…·æœ‰è®¤è¯å’ŒåŠ å¯†è´Ÿè½½çš„èƒ½åŠ›ã€‚å½“ä½¿ç”¨ SNMPv1 æˆ– SNMPv2 æ—¶,æ”»å‡»è€…å¯èƒ½ä¼šå—…æ¢ç½‘ç»œæµé‡ä»¥ç¡®å®šå›¢ä½“å­—ç¬¦ä¸²ã€‚è¿™ç§å¦¥åå¯èƒ½ä¼šå¯¼è‡´ä¸­é—´äººæ”»å‡»æˆ–é‡æ”¾æ”»å‡»ã€‚
>
> ...
>
> ä»…ä»…ä½¿ç”¨ SNMPv3 è¿˜ä¸è¶³ä»¥é˜²æ­¢åè®®è¢«æ»¥ç”¨ã€‚æ›´å®‰å…¨çš„æ–¹æ³•æ˜¯å°† SNMPv3 ä¸ä½¿ç”¨ SNMP è§†å›¾çš„ç®¡ç†ä¿¡æ¯åº“(MIB)ç™½åå•ç»“åˆä½¿ç”¨ã€‚
>
> [https://www.cisa.gov/news-events/alerts/2017/06/05/reducing-risk-snmp-abuse][55]

æˆ‘åœ¨ LibreNMS ä¸­æ·»åŠ äº†ç½‘ç»œä¸Šæ‰€æœ‰æ”¯æŒçš„è®¾å¤‡,ä½¿ç”¨æœ€"å®‰å…¨"çš„åè®®ç‰ˆæœ¬ V3ã€‚

å®ƒå¯ä»¥å…è´¹å®Œæˆä¸€ä¸ªå¾ˆé…·çš„ã€ç°ä»£çš„ã€åŸºäº SaaS çš„è¿½è¸ªå’Œç›‘æ§æœåŠ¡æ‰€åšçš„ä¸€åˆ‡ã€‚å¥½å§,ä¹Ÿè®¸ä¸æ˜¯_å…¨éƒ¨_ - ä½†å®ƒçš„æ·±åº¦ä»¤äººæ„‰æ‚¦ã€‚å…¶ä»–é€‰é¡¹(ä¸ä¸€å®šäº’æ–¥)åŒ…æ‹¬`zabbix`å’Œ`munin`,æˆ‘ä¹‹å‰éƒ½å°è¯•è¿‡,ä½†ä»æœªåšæŒä½¿ç”¨ã€‚äº‹å®è¯æ˜,è¿™æ˜¯ä¸€ä¸ªæ·±ä¸å¯æµ‹çš„é¢†åŸŸ,è€Œä¸”ä¸æ˜¯æˆ‘éå¸¸äº†è§£çš„é¢†åŸŸã€‚

![LibreNMS][98]
LibreNMS [ç”±æˆ‘æä¾›][56]
ä½†æˆ‘_ç¡®å®_å–œæ¬¢å›¾è¡¨å’Œæ¼‚äº®çš„ä»ªè¡¨ç›˜ã€‚
ä¸è¦ç›¸ä¿¡ä½ çš„ VPS ä¾›åº”å•†
æˆ‘çš„ VPS ç”± Contabo æ‰˜ç®¡,éšæœºå®•æœºäº†å°†è¿‘ 4 å¤©ã€‚ä½ æ— æ³•è¯»åˆ°è¿™ä¸ªåšå®¢ã€‚
åªæœ‰_é€šè¿‡ä¸åŒ IP çš„ VNC æ‰èƒ½å·¥ä½œã€‚æˆ‘èƒ½ä¸è‡ªå·±ä»_2014_å¹´å°±æŒç»­ä»˜è´¹çš„æœåŠ¡å™¨é€šä¿¡çš„å”¯ä¸€æ–¹å¼å°±æ˜¯ VNCã€‚_å…¶ä»–_ä»€ä¹ˆéƒ½ä¸è¡Œ - pingã€SSH,ä»€ä¹ˆéƒ½ä¸è¡Œã€‚è€Œæˆ‘ä¸ºè‡ªå·±å†™å‡ºè¯¦ç»†çš„æ”¯æŒå·¥å•å¹¶è‡ªå·±æ£€æŸ¥æ‰€æœ‰å¯èƒ½çš„é—®é¢˜è€Œæ„Ÿåˆ°è‡ªè±ª - è¿™æ¬¡,é—®é¢˜_ä¸æ˜¯_å‡ºåœ¨ DNS ä¸Šã€‚:-)
äº‹ä»¶çš„ç®€è¦æ—¶é—´çº¿å¦‚ä¸‹:é¦–å…ˆ,æˆ‘æäº¤å·¥å•æè¿°é—®é¢˜,åŒ…æ‹¬ DNS é…ç½®çš„å‰¯æœ¬ã€‚
æˆ‘ä¼šé¿å…åœ¨æ­¤ç²˜è´´é€å­—é€å¥çš„äº’åŠ¨å†…å®¹,ä½†ä»–ä»¬çš„å›åº”å½’ç»“ä¸º
> ä½ çš„é—®é¢˜å¬èµ·æ¥åƒæ˜¯æ²¡æœ‰è®¾ç½® DNS æœåŠ¡å™¨çš„æƒ…å†µã€‚
â€¦â€¦åé¢æ˜¯ä¸€äº›é€šè¿‡ resolv.conf è®¾ç½® Google DNS æœåŠ¡å™¨çš„æ­¥éª¤ã€‚
å½“ç„¶,DNS æ˜¯æˆ‘é¦–å…ˆæ£€æŸ¥çš„ä¸œè¥¿ã€‚è§ä¸Šæ–‡ã€‚æˆ‘çš„å›å¤åŒ…æ‹¬äº† DNS é…ç½®çš„å¦ä¸€ä¸ªå‰¯æœ¬(è¿™æ¬¡æ˜¯æˆªå›¾),ä»¥åŠä¸€ä¸ªå‹å¥½çš„æç¤º,è¯´æˆ‘æ— æ³•å®‰è£… apt åŒ…,å› ä¸ºæœºå™¨ä¸ä»–ä»¬æ•°æ®ä¸­å¿ƒä¹‹å¤–çš„ä»»ä½•ä¸œè¥¿éƒ½æ–­å¼€äº†ã€‚
æˆ‘è¯•å›¾é€šè¿‡åšæ›´å¤šæŒ–æ˜æ¥æä¾›æ›´å¤šè§è§£ã€‚åŸæ¥,æˆ‘ç”šè‡³æ— æ³•ç›´æ¥ ping é€š IP(å³,ä¸æ¶‰åŠ DNS)ã€‚ä¼¼ä¹æˆ‘çš„ ISP å’Œä»–ä»¬çš„æ•°æ®ä¸­å¿ƒæ— æ³•é€šä¿¡ã€‚

![å¤–éƒ¨ç½‘ç»œè·¯å¾„è¯´ä¸][99]
å¤–éƒ¨ç½‘ç»œè·¯å¾„è¯´ä¸ [ç”±æˆ‘æä¾›][57]
è¿˜æœ‰ä¸€ä¸ªæœ‰è¶£çš„è§‚å¯Ÿç»“æœæ˜¯,VPS æ— æ³•ä¸å¤–éƒ¨çš„ä»»ä½•ä¸œè¥¿é€šä¿¡ã€‚VNC ä¹‹æ‰€ä»¥æœ‰æ•ˆ,æ˜¯å› ä¸ºå®ƒä¼šé€šè¿‡åŒä¸€æ•°æ®ä¸­å¿ƒçš„å¦ä¸€å°æœºå™¨éš§é“ä¼ è¾“ã€‚
![Pingåœ¨å†…éƒ¨ä¹Ÿè¯´ä¸][100]
Ping åœ¨å†…éƒ¨ä¹Ÿè¯´ä¸ [ç”±æˆ‘æä¾›][58]
93.184.215.14 æ˜¯[example.org][59]ã€‚è¿™æ°¸è¿œä¸ä¼šè¶…æ—¶,å› ä¸ºæˆ‘è®©å®ƒé€šå®µè¿è¡Œã€‚æ˜¯çš„,è€ƒè™‘åˆ°ç®€å•çš„ ping çš„å±€é™æ€§,æˆ‘ä¹Ÿç”¨ netcat åšäº†æ‰€æœ‰è¿™äº›è°ƒè¯•ã€‚
æ›´å¥‡æ€ªçš„æ˜¯,arp æ‰«æç»™æˆ‘è¿”å›äº† 207.244.240.1,è¿™æ˜¯ä»–ä»¬åœ¨å¯†è‹é‡Œå·çš„æ•°æ®ä¸­å¿ƒã€‚è™½ç„¶å¯ä»¥è®¿é—®,ä½†ä»å¤–éƒ¨åˆ°è¾¾é‚£é‡Œå……å…¶é‡ä¹Ÿæ˜¯æ–­æ–­ç»­ç»­çš„:
![ä¸ç¨³å®š][101]
ä¸ç¨³å®š [ç”±æˆ‘æä¾›][60]
è¿™é‡Œçš„ä¸€åˆ‡éƒ½è¡¨æ˜ä»–ä»¬é‚£è¾¹å­˜åœ¨æ›´å¤§çš„ç½‘ç»œé—®é¢˜,è€Œæˆ‘çš„æœåŠ¡å™¨å·²ç»ç¦»çº¿ 48 å°æ—¶äº†ã€‚
2 å¤©å,æˆ‘è‡ªå·±çš„é€‰æ‹©å·²ç»ç”¨å°½,æœºå™¨çªç„¶é‡æ–°ä¸Šçº¿äº† - æ®æˆ‘æ‰€çŸ¥,æ˜¯åœ¨ä¸€ä¸ªä¸åŒçš„æ•°æ®ä¸­å¿ƒã€‚æˆ‘æ²¡æœ‰åšè¿›ä¸€æ­¥çš„æ›´æ”¹,è€Œæ˜¯ç€æ‰‹è¿ç§»åˆ° Hetzner(è§ä¸‹æ–‡)ã€‚æˆ‘æ”¶åˆ°äº†è¿™å°ç”µå­é‚®ä»¶:
> æ„Ÿè°¢æ‚¨çš„è€å¿ƒç­‰å¾…ã€‚æˆ‘ä»¬æ£€æŸ¥äº†æ‚¨çš„ VPS M SSD/å®ƒå¯¹ Ping è¯·æ±‚æœ‰ååº”,SSH å’Œ VNC ä¹Ÿéƒ½å¯ä»¥è®¿é—®ã€‚å› æ­¤,æˆ‘ä»¬è®¤ä¸ºé—®é¢˜å·²ç»è§£å†³ã€‚è¯·æ‚¨å†æ¬¡æ£€æŸ¥æ‚¨é‚£è¾¹çš„æƒ…å†µã€‚

â€¦â€¦å¤ªæ£’äº†ã€‚æˆ‘_ä»€ä¹ˆéƒ½æ²¡åš_(è§ä¸Šæ–‡ - æˆ‘æƒ³æˆ‘ä¹Ÿåšä¸äº†ä»€ä¹ˆ!)ç„¶åå®ƒçªç„¶å°±å·¥ä½œäº†ã€‚
å¦‚æœæˆ‘_ç¡®å®_æç ¸äº†ä»€ä¹ˆ,æˆ‘å½“ç„¶ä¸ä¼šä¸æ‰¿è®¤ - æˆ‘åœ¨è¿™ç¯‡æ–‡ç« å’Œè¿™ä¸ªåšå®¢ä¸­å·²ç»å¤šæ¬¡è¿™æ ·åšäº†,æˆ‘_ç»å¸¸_æç ¸ç³»ç»Ÿç®¡ç†å‘˜çš„äº‹æƒ… - ä½†è¿™ä¸€æ¬¡,æˆ‘å‘ä½ ä¿è¯åœ¨è¿™ä»¶äº‹å‘ç”Ÿä¹‹å‰,æˆ‘æ²¡æœ‰å¯¹è¿™å°æœºå™¨åšä»»ä½•æ›´æ”¹,åœ¨å®ƒç¥å¥‡åœ°è¢«ä¿®å¤ä¹‹å‰ä¹Ÿæ²¡æœ‰ã€‚
æˆ‘ä¸æŒ‡æœ›ä»æ›´ä¾¿å®œçš„ VPS è·å¾—[99.999%][61]çš„å¯ç”¨æ€§,ä»–ä»¬åª"[å®£ä¼ ][62]"(æˆ‘è½»ææ·¡å†™åœ°ä½¿ç”¨è¿™ä¸ªè¯ - å®ƒéšè—åœ¨ä»–ä»¬çš„æ¡æ¬¾å’Œæ¡ä»¶ä¸­)å’Œ[95%][63]çš„ SLA,è¿™æ„å‘³ç€ä»–ä»¬å…è®¸æ¯å¹´è¶…è¿‡ 18 å¤©çš„åœæœºæ—¶é—´ã€‚
> (1) æä¾›å•†å°†ç¡®ä¿å¯¹è±¡å­˜å‚¨åŸºç¡€è®¾æ–½ã€ç½‘é¡µç©ºé—´åŒ…ã€ä¸“ç”¨æœåŠ¡å™¨ã€è™šæ‹Ÿä¸“ç”¨æœåŠ¡å™¨å’Œ VPS çš„ç‰©ç†è¿æ¥æ€§ä»¥ 95%çš„å¹´å¹³å‡æ¯”ç‡å¯ç”¨ã€‚
ä¸å¹¸çš„æ˜¯,è¿™ç§_äº’åŠ¨_,ä¸ä¸€å®šæ˜¯åœæœºæ—¶é—´æœ¬èº«,å®åœ¨å¤ªç³Ÿç³•äº†,ä»¥è‡³äºæˆ‘å®Œå…¨åœæ­¢æ¨è Contabo,å¹¶ä»é‚£æ—¶èµ·è½¬ç§»åˆ° Hetzner - å½“ç„¶,è¿˜æœ‰æˆ‘è‡ªå·±çš„ç‰©ç†ç¡¬ä»¶,å®ƒæœ‰ 99.995%çš„æ­£å¸¸è¿è¡Œæ—¶é—´:
![æ­£å¸¸è¿è¡Œæ—¶é—´][102]
æ­£å¸¸è¿è¡Œæ—¶é—´ [ç”±æˆ‘æä¾›][64]
å®é™…ä¸Š,ä»é•¿è¿œæ¥çœ‹,å®ƒå¯èƒ½æ›´æ¥è¿‘ 98%,ä½†é‚£æ¶‰åŠåˆ°æˆ‘ä¸»åŠ¨ç ´åä¸œè¥¿ã€‚ä½ å¯ä»¥è‡ªè¡Œåˆ¤æ–­ã€‚
å¿…é¡»å¿«èµ·æ¥
æ‰€ä»¥,å› ä¸ºè¿™ä¸ªåŸå› ,æˆ‘å¯»æ‰¾æ›¿ä»£æ–¹æ¡ˆã€‚å‡ºäºå»¶è¿ŸåŸå› ,æˆ‘æƒ³è¦ä¸€ä¸ªä¾¿å®œçš„ç¾å›½ VPS,å…·æœ‰åŸºæœ¬çš„èˆ’é€‚æ€§ã€‚æœ€ç»ˆ,ç»è¿‡å¤šæ–¹è€ƒè™‘,æˆ‘è½¬ç§»åˆ°äº†[Hetzner][65],å¦ä¸€å®¶å¾·å›½å…¬å¸,è‡³å°‘åœ¨åŒ—ç¾æœ‰ä¸€äº›æ•°æ®ä¸­å¿ƒ,ä½¿ç”¨ä»–ä»¬æ¯æœˆ 7 ç¾å…ƒå·¦å³çš„å°å‹ CPX21 VPSã€‚
è®©æˆ‘éå¸¸æƒŠè®¶çš„æ˜¯,åœ¨åŸºå‡†æµ‹è¯•ä¸­,è¯¥æœºå™¨æ¯”æˆ‘(åä¹‰ä¸Šæ›´å¼ºå¤§çš„)Contabo VPS è¿˜è¦å¿«:

```bash
sysbench --threads=4 --time=30 --cpu-max-prime=20000 cpu run
```

éš¾ä½æˆ‘äº†
![VPSåŸºå‡†æµ‹è¯• 1/2][103]
VPS åŸºå‡†æµ‹è¯• 1/2 [ç”±æˆ‘æä¾›][66]
ä»¥åŠ
![VPSåŸºå‡†æµ‹è¯• 2/2][104]
VPS åŸºå‡†æµ‹è¯• 2/2 [ç”±æˆ‘æä¾›][67]
æ˜¯çš„,åˆæˆåŸºå‡†æµ‹è¯•å¹¶ä¸å®Œç¾,ä½†å®ƒä»¬å½“ç„¶ä¹Ÿä¸æ˜¯å®Œå…¨æ²¡æœ‰æ„ä¹‰ã€‚
åŒæ ·,ä½ å¯ä»¥è‡ªè¡Œåˆ¤æ–­è¿™äº›æ•°å­—çš„æ„ä¹‰ã€‚
CIFS ä»ç„¶ä¸å¿«
ä¸å¹¸çš„æ˜¯,æœåŠ¡å™¨é…å¤‡äº† 80 GB çš„ SSDã€‚é‚£åªç›¸å½“äº 29,000 å¼  3.5 è‹±å¯¸çš„è½¯ç›˜!è¯·è®°ä½,è¿™å°æœåŠ¡å™¨è¿è¡Œ Nextcloud,æœ¬è´¨ä¸Šéœ€è¦å¤§é‡å­˜å‚¨ç©ºé—´ã€‚
æˆ‘çš„ MacBook ä½¿ç”¨ 1.2/2 TB,æˆ‘çš„ Proxmox é›†ç¾¤æ€»å®¹é‡çº¦ä¸º 50 TB(å…¬å¹³åœ°è¯´,æœ‰å¾ˆå¤šå†—ä½™),ç”šè‡³æˆ‘çš„æ‰‹æœºä¹Ÿä½¿ç”¨äº†çº¦ 200GBã€‚
æˆ‘å¶ç„¶å‘ç°äº† Hetzner çš„"[StorageBox][68]"ã€‚å¾ˆé…·çš„æ¦‚å¿µ:åŸºæœ¬ä¸Šå°±æ˜¯[rsync.net][69]æ‰€åšçš„,ä½†æ˜¯æ˜¯å¾·å›½çš„ã€‚ä½ åŸºæœ¬ä¸Šå¯ä»¥ä»¥éå¸¸ä½çš„ä»·æ ¼è·å¾—ä¸€ä¸ªç®€åŒ–çš„ç»ˆç«¯å’Œä¸€ä¸ªç¼“æ…¢çš„å…±äº«ç£ç›˜:çº¦ 4 ç¾å…ƒ/TB!ä¸å¹¸çš„æ˜¯,æ²¡æœ‰ç¾å›½çš„ä½ç½®ã€‚
ä½ å¯ä»¥é€šè¿‡ FTPã€SFTP æˆ– SCP(åˆå SSH)ã€WebDAVã€å„ç§å¤‡ä»½å·¥å…·å¦‚ borg ç­‰è®¿é—®è¿™äº›ç£ç›˜ã€‚
æ€»çš„æ¥è¯´æ˜¯ä¸€ä¸ªéå¸¸æœ‰å‰æ™¯çš„æ¦‚å¿µ,ä½†ä¸€æ—¦ä½ éœ€è¦å°†æ‰€è¿°ç£ç›˜è¿æ¥åˆ°æœåŠ¡å™¨ä»¥å¢åŠ æœ¬åœ°å­˜å‚¨å¹¶åœ¨ Nextcloud ä¸­å¯ç”¨,ä½ çš„é€‰æ‹©å°±æœ‰äº›å—é™,å®˜æ–¹[æ–‡æ¡£][70]æ¨èä½¿ç”¨ samba/cifsã€‚[sshfs][71]æ˜¯ä¸€ä¸ªæœ‰æ•ˆçš„æ›¿ä»£æ–¹æ¡ˆ,è¯¥é¡¹ç›®å¤„äºç»´æŠ¤æ¨¡å¼,ä½†æˆ‘è¿˜æ˜¯æµ‹è¯•äº†å®ƒã€‚æˆ‘æƒ³ä»æ¦‚å¿µä¸Šè®²,ä½ å¯ä»¥è®© WebDAV å·¥ä½œã€‚
æ— è®ºå¦‚ä½•,æˆ‘å°è¯•ä½¿ç”¨å®˜æ–¹æ–¹æ³•å¹¶è¿›è¡Œäº†ä¸€äº›åŸºå‡†æµ‹è¯•,å› ä¸ºå®ƒç¡®å®_æ„Ÿè§‰_å¾ˆæ…¢ã€‚
å—¯,é‚£æ˜¯å› ä¸ºå®ƒç¡®å®å¾ˆæ…¢ã€‚è¿™é‡Œæœ‰ä¸‰ä¸ªåŸºå‡†æµ‹è¯•,ä¸¤ä¸ªä½¿ç”¨ cifs(V3),åˆ†åˆ«ä½¿ç”¨ä¸¥æ ¼å’Œå®½æ¾çš„ç¼“å­˜,ä»¥åŠ sshfsã€‚

```bash
SIZE="256M"
# Sequential
fio --name=job-r --rw=read --size=$SIZE --ioengine=libaio --iodepth=4 --bs=128K --direct=1
fio --name=job-w --rw=write --size=$SIZE --ioengine=libaio --iodepth=4 --bs=128k --direct=1
# Random
fio --name=job-randr --rw=randread --size=$SIZE --ioengine=libaio --iodepth=32 --bs=4K --direct=1 
fio --name=job-randw --rw=randwrite --size=$SIZE --ioengine=libaio --iodepth=32 --bs=4k --direct=1
```

![å­˜å‚¨åŸºå‡†æµ‹è¯• 1/2][105]
å­˜å‚¨åŸºå‡†æµ‹è¯• 1/2 [ç”±æˆ‘æä¾›][72]
è¿™æ˜¯æˆ‘ç”¨æ¥æµ‹è¯•çš„å†…å®¹:
è¿™ä¹Ÿä¸æ˜¯ä¸€ä¸ªæ–°å‘ç°,å› ä¸ºæˆ‘ä¸æ˜¯ç¬¬ä¸€ä¸ªå¯¹æ­¤è¿›è¡Œ[åŸºå‡†æµ‹è¯•][73]çš„äººã€‚
æ— è®ºå¦‚ä½•,è¿™ç›¸å½“æ…¢ã€‚ç¼“æ…¢çš„åè®® cifsã€ç¼“æ…¢çš„ç›’å­_ä»¥åŠ_è·¨å¤§è¥¿æ´‹çš„å»¶è¿Ÿç›¸ç»“åˆ,ä½¿å…¶ä¸æ˜¯ç‰¹åˆ«æœ‰å¸å¼•åŠ›ã€‚
ä¸ºäº†ç»™ä½ ä¸€äº›è§†è§’,è¿™é‡Œæ˜¯åŒæ ·çš„å›¾è¡¨,ä½¿ç”¨ç›¸åŒçš„åŸºå‡†æµ‹è¯•åœ¨æœ¬åœ° Proxmox VM ä¸Šè¿è¡Œ:
![å­˜å‚¨åŸºå‡†æµ‹è¯• 2/2][106]
å­˜å‚¨åŸºå‡†æµ‹è¯• 2/2 [ç”±æˆ‘æä¾›][74]
Blob å­˜å‚¨ã€Blob é±¼å’Œæ–‡ä»¶ç³»ç»Ÿ:éƒ½æ˜¯"å‘ƒ"
ç°åœ¨,ç”šè‡³_ä¸ä½¿ç”¨_"ç£ç›˜",è¿™å°±æ˜¯ç°åœ¨æ‰€æœ‰é…·å­©å­éƒ½åœ¨åšçš„äº‹æƒ…ã€‚ä»–ä»¬ç®€å•åœ°æŠ›å¼ƒäº†ç°ä»£ã€å¿«é€Ÿã€æœ¬åœ°å­˜å‚¨çš„å‡ ä¹æ‰€æœ‰ä¼˜åŠ¿,åŒ…æ‹¬é«˜è´¨é‡ã€ç»è¿‡æµ‹è¯•ã€åŸå­æ€§ã€çº é”™(â€¦â€¦)æ–‡ä»¶ç³»ç»Ÿ,ä½ çŒœæ€ä¹ˆç€,æ²¡æœ‰_æ–‡ä»¶ç³»ç»Ÿ,è€Œæ˜¯ç§°ä¹‹ä¸º"å¯¹è±¡"(æˆ–"blob")å­˜å‚¨,å¹¶ä¸”æ²¡æœ‰è·å¾—è¿™äº›åŠŸèƒ½,ä½†è·å¾—äº†å¤§é‡å»‰ä»·çš„å­˜å‚¨ç©ºé—´!
ç¦»é¢˜:æ—¢ç„¶"blob"è¿™ä¸ªè¯ç°åœ¨è¢«ç´¢å¼•äº†,åœ¨ä½ ä¸ºå­˜å‚¨æ¶æ„çš„å¤±è´¥è€Œç¾è¾±ä¸€æ¡æ— åŠ©çš„é±¼ä¹‹å‰,è¯·è®°ä½ä»¥ä¸‹å†…å®¹:
![å¯æ€œçš„é±¼][107]
å¯æ€œçš„é±¼ [ç”± Naila Latif æä¾›][75]
æ— è®ºå¦‚ä½• - å°½ç®¡æœ‰ç¼ºç‚¹,ä½†è¿™å¹¶ä¸æ˜¯ä¸€ä¸ªæ–°æ¦‚å¿µã€‚åœ¨ä¸“ä¸šé¢†åŸŸ,æˆ‘ä¼šä¸ºå¼€å‘äººå‘˜æœºå™¨ã€æ•°æ®åº“ç­‰ä½¿ç”¨å¿«é€Ÿçš„ NVMe é©±åŠ¨å™¨,ä¸ºä¸å¤ªå¯†é›†çš„åº”ç”¨æœåŠ¡å™¨ä½¿ç”¨å¸¸è§„ SSD,ä¸ºæ…¢é€Ÿä½†ä¾¿å®œçš„æ•°æ®å­˜å‚¨å’Œåˆ†å¸ƒå¼æŸ¥è¯¢å¼•æ“ä½¿ç”¨ blob å­˜å‚¨,å¹¶åœ¨éœ€è¦æ—¶ä½¿ç”¨å¯é€‰çš„ç¼“å­˜ã€‚åœ¨è¿‡å»çº¦ 10 å¹´çš„å¤§å¤šæ•°æ•°æ®å¹³å°é¡¹ç›®ä¸­,æˆ‘éƒ½åŸºäº S3/GCS ç­‰,å¹¶ä¸”é€šå¸¸å­˜å‚¨äº†æ•°ç™¾ TiB(å¦‚æœä¸æ˜¯ PiB)çš„æ•°æ®ã€‚
ç„¶è€Œ - è¿™äº›å­˜å‚¨ç³»ç»Ÿ_ä¸æ˜¯_æ–‡ä»¶ç³»ç»Ÿ,è¯•å›¾å‡è£… s3 å’Œ zfs ç›¸ä¼¼,å› ä¸ºå®ƒä»¬éƒ½å­˜å‚¨æ–‡ä»¶(å°±åƒæŸç§ç–¯ç‹‚çš„ã€è¡¨é¢å±‚æ¬¡çš„ğŸ¦†ç±»å‹),è¿™ä¸ä¼šæœ‰å¥½ç»“æœã€‚
ä½†æ˜¯,è€ƒè™‘åˆ°æˆ‘çš„è®¿é—®æ¨¡å¼ - å­˜å‚¨æ–‡ä»¶å¹¶å¶å°”æ‰‹åŠ¨è®¿é—®å®ƒä»¬,è€Œä¸æ˜¯åœ¨å…¶ä¸Šæ‰˜ç®¡æ•°æ®åº“,å°±åƒæˆ‘ä½¿ç”¨åŸºäºæ…¢é€Ÿ HDD çš„æœ¬åœ°æ–‡ä»¶æœåŠ¡å™¨ä¸€æ ·,æˆ‘ä»ç„¶åœ¨å¯»æ‰¾ blob å­˜å‚¨é€‰é¡¹æ¥ä»…å­˜å‚¨æˆ‘çš„ Nextcloud æ•°æ®ã€‚
ä½ çš„é€‰æ‹©åŸºæœ¬ä¸Šæ˜¯å¤§å‹æä¾›å•†,å¦‚ AWS,å…¶ä¸­ 1TB çš„è´¹ç”¨å¤§çº¦ä¸ºæ¯æœˆ 20-24 ç¾å…ƒ,å…·ä½“å–å†³äºæä¾›å•†å’Œåœ°åŒºã€‚
å®ç°ç›¸åŒåè®®(ä¾‹å¦‚ s3)çš„ç¬¬ä¸‰æ–¹æ›¿ä»£æ–¹æ¡ˆä¸»è¦æ˜¯[Wasabi][76]å’Œ[Backblaze][77]ã€‚

Wasabi çš„æœ€ä½æ”¶è´¹ä¸ºæ¯æœˆ 6.99 ç¾å…ƒ(è¿™æ˜¯æ¯ TB çš„ä»·æ ¼),å¹¶ä¸”_æœ€å°‘å­˜å‚¨ 90 å¤©(å³åˆ é™¤æ•°æ®æ— æµäºäº‹)ã€‚Backblaze è¡¨é¢ä¸Šæ›´ä¾¿å®œ,ä¸ºæ¯æœˆ 6 ç¾å…ƒ/TB,ä½†å¦‚æœè¶…å‡ºå¹³å‡æ¯æœˆå­˜å‚¨æ•°æ®çš„ 3 å€,ä»–ä»¬ä¼šå¯¹å‡ºå£æµé‡æ”¶å–æ¯ GB 0.01 ç¾å…ƒçš„è´¹ç”¨,è€Œ Wasabi åŒ…å«äº†è¿™éƒ¨åˆ†è´¹ç”¨ã€‚
è€ƒè™‘åˆ°åœ¨è¿ç§»æœŸé—´æˆ‘èŠ±äº† 35 ç¾å…ƒçš„å‡ºå£è´¹ç”¨æ‰å°† 500GB çš„æœåŠ¡å™¨å¤‡ä»½ä» S3 ä¸­å–å‡º,å¹¶åœ¨é˜…è¯»äº†[è¿™ç¯‡æ–‡ç« ][78]å,æˆ‘é€‰æ‹©äº† Wasabi å¹¶å°†æ–‡ä»¶ç§»åŠ¨åˆ°é‚£é‡Œ:
![Wasabi][108]
Wasabi [ç”±æˆ‘æä¾›][79]
ç„¶åä½¿ç”¨ Nextcloud çš„[å¤–éƒ¨å­˜å‚¨][80]ç•Œé¢æ¥æŒ‚è½½é©±åŠ¨å™¨ã€‚
æˆ‘èƒ½è¯´ä»€ä¹ˆå‘¢,å®ƒ...å¯ä»¥å·¥ä½œã€‚å®ƒçš„è¡Œä¸ºå°±åƒ S3 ä¸€æ ·:å¦‚æœä½ éœ€è¦åˆ—å‡ºå¤§é‡æ–‡ä»¶æˆ–å¯¹å¤§é‡å°æ–‡ä»¶è¿›è¡Œä»»ä½•æ“ä½œ,é‚£å°†æ˜¯ä¸€ä¸ªå·¨å¤§çš„ç—›è‹¦,è€Œä¸”_ä¸ä¼š_å¾ˆå¿«ã€‚è¿™å°±æ˜¯ä¸ºä»€ä¹ˆåŠå®˜æ–¹å»ºè®®ä½¿ç”¨[å­˜å‚¨æ¡¶ç”Ÿå‘½å‘¨æœŸ][81]ç­–ç•¥æ¥åˆ é™¤å¤§é‡å°æ–‡ä»¶çš„åŸå› ã€‚
å¯¹äºæ¯ TB 6.99 ç¾å…ƒ,å®ƒå·¥ä½œå¾—_è¿˜è¡Œ_ã€‚åœ¨å†·ç¼“å­˜(ä¾‹å¦‚æ–°è®¾å¤‡)ä¸Šåˆ—å‡ºæ–‡ä»¶æ…¢å¾—åƒç³–èœœ,æœç´¢æ–‡ä»¶å®Œå…¨å–å†³äºä½ çš„ç´¢å¼•(ä¸æœ¬åœ° NVMe å­˜å‚¨ä¸Šçš„ find æˆ– grep ç›¸æ¯”)ã€‚
çœ‹åˆ°è¿™ä¸ªå±å¹•æŒç»­å‡ ç§’é’Ÿæ˜¯æ­£å¸¸çš„:
![iOSä¸Šçš„Nextcloud][109]
iOS ä¸Šçš„ Nextcloud [ç”±æˆ‘æä¾›][82]
å…¬å¹³åœ°è¯´,è¿™å®é™…ä¸Šåªæ˜¯ç§»åŠ¨è®¾å¤‡ä¸Šçš„é—®é¢˜,å› ä¸ºæ— è®ºå¦‚ä½•æˆ‘åœ¨ Mac ä¸Šå·²ç»ä¸‹è½½äº†æ‰€æœ‰æ–‡ä»¶ã€‚
æˆ‘å¯èƒ½è¿˜ä¼šå°è¯•[rsync.net][83],å®ƒçš„ä»·æ ¼ä¸ºæ¯æœˆ 12 ç¾å…ƒ/TBã€‚
CrowdSec
æœ€åä½†åŒæ ·é‡è¦çš„æ˜¯,ä½ è¿˜è®°å¾—[fail2ban][84]å—?ä½ åº”è¯¥è®°å¾—,å› ä¸ºå®ƒä»ç„¶æ˜¯ä¸€ä¸ªéå¸¸æ´»è·ƒçš„é¡¹ç›®,å¯èƒ½åº”è¯¥ä½œä¸ºç®€å•å…¥ä¾µé˜²å¾¡çš„é»˜è®¤æ¨èã€‚
ä½†æ˜¯,åœ¨è®¾ç½®æ–°æœåŠ¡å™¨æ—¶,æˆ‘è®¤ä¸ºå€¼å¾—æ£€æŸ¥ä¸€äº›è¾ƒæ–°çš„å·¥å…·,å³[CrowdSec]85),å®ƒå°†è‡ªå·±æè¿°ä¸º

> ä¸€ä¸ªå…è´¹ã€ç°ä»£å’Œåä½œçš„è¡Œä¸ºæ£€æµ‹å¼•æ“,ä¸å…¨çƒ IP ä¿¡èª‰ç½‘ç»œç›¸ç»“åˆã€‚å®ƒåŸºäº fail2ban çš„ç†å¿µ,ä½†å…¼å®¹ IPV6 ä¸”é€Ÿåº¦å¿« 60 å€(Go vs Python)(â€¦â€¦)
CrowdSec çš„ä¼˜ç‚¹åœ¨äº,é¡¾åæ€ä¹‰,å¨èƒæ£€æµ‹æ¨¡å¼æ­£åœ¨ä¸ä»–ä»¬çš„ç¤¾åŒº(åŒ¿å)å…±äº«,è¿™(æ®ç§°)äº§ç”Ÿäº†æ›´å¥½çš„å¨èƒæ£€æµ‹æ•ˆæœã€‚å®ƒè¿˜æœ‰ä¸€ä¸ªæ’ä»¶[ä¸­å¿ƒ][86],ä¸ºå„ç§å·¥å…·æä¾›"ä¿é•–"ã€‚
å®ƒè¿˜é™„å¸¦äº†ä¸€ä¸ªæ•´æ´çš„å‘½ä»¤è¡Œç•Œé¢,å¯ä»¥ä¸ºä½ æä¾›å®ƒæ­£åœ¨åšä»€ä¹ˆçš„ç»Ÿè®¡ä¿¡æ¯:
ä¾‹å¦‚,å®ƒä¼šå‘Šè¯‰æˆ‘å®ƒå›  crowdsecurity/CVE-2019-18935(ä¸€ä¸ªé’ˆå¯¹[æ­¤][87] CVE çš„è§„åˆ™)ç¦æ­¢äº† 33 ä¸ª IPã€‚
æ€»çš„æ¥è¯´,æˆ‘æ˜¯å®ƒçš„ç²‰ä¸ - å®ƒæ— ç–‘æ„Ÿè§‰åƒæ˜¯ fail2ban çš„è‡ªç„¶æ¼”å˜(å³ä½¿æˆ‘æ€€ç–‘å®ƒä»¬å¯ä»¥å…±å­˜),åªè¦èƒŒåçš„å…¬å¸åœ¨æŸä¸ªæ—¶å€™ä¸ä¼šåˆ©ç”¨å…¶ç”¨æˆ·ç¾¤,æˆ‘å°±ä¼šåšæŒä½¿ç”¨å®ƒã€‚
ç»“è®º
å¦‚æœä½ æ˜¯ä¸€åè½¯ä»¶å·¥ç¨‹å¸ˆ,æˆ‘å»ºè®®ä½ è‡ªå·±æ‰˜ç®¡ä¸€äº›ä¸œè¥¿ã€‚é€šè¿‡å¼ºåˆ¶æ¥è§¦é‚£äº›åœ¨æ—¥å¸¸å·¥ä½œä¸­ä¸å¤ªå¯èƒ½é‡åˆ°çš„é—®é¢˜,ä½ å¯ä»¥å­¦åˆ°å¾ˆå¤šä¸œè¥¿,è¿™æœ¬èº«å°±æ˜¯ä¸€ç§å¥½å¤„ã€‚æ›´å¥½çš„æ˜¯,æˆ‘ç›¸ä¿¡ä½ æœ€ç»ˆä¼šåœ¨æ—¥å¸¸å·¥ä½œä¸­è‡³å°‘ä½¿ç”¨å…¶ä¸­ä¸€äº›ä¸œè¥¿,å‰ææ˜¯ä½ ä»äº‹çš„æ˜¯ä¸åç«¯æœ‰ç‚¹å…³ç³»çš„å·¥ä½œã€‚
é€šè¿‡è‡ªå·±æ‰˜ç®¡ä¸œè¥¿,ä½ è¿˜å¯ä»¥è·å¾—åˆç†ç¨‹åº¦çš„è‡ªä¸»æƒ - æˆ–è€…è‡³å°‘æ˜¯ä¸€äº›å¯¹å†² - æ¥å¯¹æŠ—ä½ çš„æ•´ä¸ªç”Ÿæ´»éƒ½æ˜¯æ°¸ä¹…ç§Ÿç”¨è®¢é˜…çš„ä¼ä¸šæ¢¦æƒ³ã€‚æˆ‘è®¤ä¸ºè¿™å¾ˆå¥½ã€‚


[20]: https://chollinger.com/blog/2019/04/building-a-home-server/
[21]: https://chollinger.com/blog/2023/04/migrating-a-home-server-to-proxmox-truenas-and-zfs-or-how-to-make-your-home-network-really-complicated-for-no-good-reason/
[23]: https://www.hbo.com/curb-your-enthusiasm
[25]: https://ngrok.com/blog-post/how-ngrok-uses-dagster-to-run-our-data-platform
[26]: https://www.howtogeek.com/449691/what-is-swapiness-on-linux-and-how-to-change-it/
[27]: https://www.hpc.dtu.dk/?page_id=1180
[28]: https://github.com/chollinger93/bridgefour
[29]: https://flink.apache.org/
[30]: https://github.com/softwaremill/magnolia
[31]: https://github.com/sksamuel/avro4s
[32]: https://scalapb.github.io/
[33]: https://iceberg.apache.org/
[34]: https://kafka.apache.org/
[35]: https://github.com/scalapb/ScalaPB/pull/1674
[37]: https://superset.apache.org/
[38]: https://github.com/coder/code-server
[43]: https://github.com/linuxserver/Heimdall
[44]: https://github.com/mattwebbio/orbital-sync
[45]: https://github.com/jiangcuo/Proxmox-Port
[47]: https://www.youtube.com/watch?v=hNrr0aJgxig
[48]: /blog/2023/10/moving-a-proxmox-host-with-a-sas-hba-as-pci-passthrough-for-zfs--truenas/
[49]: https://openzfs.github.io/openzfs-docs/Performance%20and%20Tuning/Module%20Parameters.html#zfs-arc-max
[52]: https://www.librenms.org/
[53]: https://en.wikipedia.org/wiki/Simple_Network_Management_Protocol?useskin=vector
[54]: https://ngrok.com/
[55]: https://www.cisa.gov/news-events/alerts/2017/06/05/reducing-risk-snmp-abuse
[59]: http://example.org/
[61]: https://uptime.is/99.999
[62]: https://contabo.com/en-us/legal/terms-and-conditions/
[63]: https://uptime.is/95
[65]: https://www.hetzner.com/
[68]: https://www.hetzner.com/storage/storage-box/
[70]: https://docs.hetzner.com/robot/storage-box/access/access-samba-cifs/
[71]: https://github.com/libfuse/sshfs
[73]: https://blog.ja-ke.tech/2019/08/27/nas-performance-sshfs-nfs-smb.html
[75]: https://nailalatif002.medium.com/on-ugliness-of-blobfish-culpable-ignorance-and-gods-guilt-14fd3b226908
[76]: https://wasabi.com/
[77]: https://www.backblaze.com/
[78]: https://help.nextcloud.com/t/high-aws-s3-costs-due-to-nextcloud-requests/68687/4
[80]: https://docs.nextcloud.com/server/29/admin_manual/configuration_files/external_storage_configuration_gui.html
[81]: https://docs.aws.amazon.com/AmazonS3/latest/userguide/object-lifecycle-mgmt.html
[82]: https://chollinger.com
[83]: https://rsync.net/
[84]: https://github.com/fail2ban/fail2ban
[85]: https://github.com/crowdsecurity/crowdsec
[86]: https://app.crowdsec.net/hub?q=next&page=1
[87]: https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-18935
[88]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240825124525084.png
[89]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240825135445550.png
[90]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240825131026074.png
[91]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240825131634407.png
[92]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240824101120003.png
[93]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240607213853924.png
[94]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240607214429699.png
[95]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240607214732963.png
[96]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240607215257458.png
[97]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240607215539705.png
[98]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240824103028884.png
[99]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240607221106538.png
[100]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240607221115352.png
[101]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240607221122749.png
[102]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240825104016231.png
[103]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/GPGtDkkXoAAW9XD.png
[104]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/GPGtEuXXYAAdzJ4.png
[105]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240825111920987.png
[106]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240825134453828.png
[107]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/blob.jpeg
[108]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240825112653613.png
[109]: https://chollinger.com/blog/2024/08/why-i-still-self-host-my-servers-and-what-ive-recently-learned/assets/image-20240825114612035.png
